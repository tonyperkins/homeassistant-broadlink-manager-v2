import{g as Ne,a as Xe,d as Ke,c as W,r as k,o as Se,b as i,e as a,f as e,h as A,n as Z,t as g,i as C,w as re,j as J,v as $e,F as de,k as ye,l as ae,m as Be,p as ie,q as Oe,s as Pe,T as He,u as Ce,x as we,y as Re,z as _e,A as oe,B as qe,C as je,D as Te,E as ze,G as Je,H as Ye,I as Ze,J as Ee,K as Qe,L as et}from"./vendor-DL3HmlQs.js";(function(){const v=document.createElement("link").relList;if(v&&v.supports&&v.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))b(d);new MutationObserver(d=>{for(const p of d)if(p.type==="childList")for(const w of p.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&b(w)}).observe(document,{childList:!0,subtree:!0});function r(d){const p={};return d.integrity&&(p.integrity=d.integrity),d.referrerPolicy&&(p.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?p.credentials="include":d.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function b(d){if(d.ep)return;d.ep=!0;const p=r(d);fetch(d.href,p)}})();function Le(){const l=Ne(),v=l==null?void 0:l.appContext.config.globalProperties.$toast;return v||(console.warn("Toast not available"),{success:r=>console.log("Success:",r),error:r=>console.error("Error:",r),warning:r=>console.warn("Warning:",r),info:r=>console.info("Info:",r)})}const Ue="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAHBUlEQVR4nOxZC1BTVxo+9+aNZI2LNsgjWR4hgoIiRVDBslKnIKPbx1jqTrtYoakat1a6dNsdd7t1X8XHyAbEhdUu1u2mXdbasqJbtsaMIqBBECiPBmqEICEBEx4xJLlJ7s6lw6rJDeQ2FzLM+M1kBs7/3+/83zn/Oee/51JRFAXzGbCvA/AWjwX4GvNeANWXnXffHQ4+K6/dYbHeD+IFhjRkb1wn9WPQbEQ4IF/tQlXX2p5+/8OyczY74j/VxuMG3Sh/Oz9jaQDb4CmPT1LIbLXBfzrz0cmHg8fQpx1Yc1Ra+TsiXD4R0PqtRmAyj/LxbJeaujKIcPlEAINOM7vLXBaTZibCRWgRq3WGJZWX63aoNDpB8BJOX/bGlIqwpUv6iXBgWBHG7eUF8urUWvU6Z9sLGxI/IsLl8SJu6u4XigqPXkVspiVTbTQqU1/6Vn7ammh+G5FOMZyqludIKqUVU/9jcaSuTCo/unfHbiad4iBdwMu/P1bV1tO1xbk9NDC0/vwHB1xGcjqYLAh16zsHW3R6XXTu1mfFdAqMrIoSKNbGhLcQ4QGeppDJ7ACtPcqNEI6tT9O3Vqm+tygqNMDjrU9Sef6tIYM2JjUuuXzfC5knCEXsBI8WMZUCAxiCrfhWyMZkMNzYXNHVpwmXXqp5j0Hz0/1m57a3PQ8VHx4JoNMASIl9shLPFsB5ooO7iDXhCY/dAcCvT/79LwC1s/K2bDnAXcQeJRqwMzzeRt/bua0gLChcDsCDNQNBkEU/qot7o6j0kzETQpuJ40ZnT6xSrUoNWhyseHVz2ikv4n4QA5FSArE5IFlTZ0r3XU1MWODib6NCl3a9dkhSYxgbjo4XLq8sL9j7Ip36YEwMRjMNQazMhf7+RgYNnuyo7bY6ArFaWKuXRX495wLwoLk39sO9RaVnM5OTP8zLSjtjsljpp6ovi6pqr706eE8XBwGUSqEy9Guihf/92TMZhetjI5rJCHwKpBRzZqsNYtKp6KD+Pvv1w5ILdzR3UvD8HA4YefOl7N25JKUPIKuUwIJH7A5of/GJf7oLfrIz2EH786fSss+uKFzOk+8L0mqh6rpbmR0q5YyFGAQBSuHHlcUWxEaZyXfMhFD0Rgt9Oh/SBMiam58HAO+oc4XZMsK/1taT6M6uHjJw8w6VSNfvemM8TbzPlFlwsP5KyzfJeL6kCejXDgo894aASqOZ9O/uHwzq6B3ijhitkzOC7XS7j0g+V3S0vQTDDhYEoZSBobvJ+yXFNZ29gy4lOGmvlDBMIfQqSKV8539EWvXHhvbGHBSFrAwGW+vvxzLoR7RxzrNpsyPs0xcv7/lg1/ZfPtKvuw7MVhulUakWdvRq+XY3tWFT90Bk+52BCOzvyOBgjytSFKAgms+b9F/2o+BbKwUrvgjhhjSjKLAPG4YE7lJxfEIf5dyGOwMXrren/eF0RYXRNMrHDt4QbmjDEbHop9F8rqpddZd3sV6R/aWiabtWr41PW534V8m+PFHW+qSPL9TX7oM8WAaBi4IbE4S8yYNs/7asIgBA0ZStRqFM/MXxIzcgHBEBP+C6DJKLgJvK3uXvniitBsDmNzkSEAD9uv5k0aFjXy1gMQ0DQ5p4CAIwNuXLwyL/ExcpqMWeS42NUmxKXFf8VWPdz6cLnkqhGd/Pe+U1Cow/+ekJUYr4qJgvbik7f/Jw+0J/tjpvS3qxs7/LQZZfcrrkUmOdGI/cgUKIkB8pz0xK+CQjKf6z4MWckYftZqsderfsTInsZt0evDRgMRYMHhaLnk+NW1Y/nchxk5lZ+I/Pf/vl9RvbLYiVlSBcJv/VK9sKBCHc3hkF7D12/NzVltZn8YhzNj/3ev6LGeXTdQ6+uzLZ+C+5XNza05Nsd1gXcNgBvekJK/+du3lTUSiXMzzT80TgkkK8wJAGgCMAE5ooFFz3hHTr+lgZ9iMryOngkoi5WZuOc9hPtDu3r4198nTqygjCr3wYmrvVkSerZXljJoT0m0DcYm5g2Mg5WV39zrVWZZofkzaRnhB/bufm9FI/JpXQXj8F8bHyitqWxhzJmwUJT60SNJER+P+BCZjt34lzNbvickRoWVWNmGzuObnYWhER3oAdX41dPbj1jDeYEwGrInltKKCNtatub6hRfJOEnfJkcc+JgE9ltS/DkINuNI3xCo4fbXgm/0CnouvOcjK4Z/16/ZKia+3+kqIrEIQ+sgNx2Jzb5wsPxrD9GBZv+Gd9BqSXr4icg8cwMj4SLmv6+mlv+WddgGlilOPOZkEmFnrLP+sCVgtXyPHaHShkiw0XXPWWf9YF5Gb9uGzp4sCbj7ai4LkNTx2O5nPV3vLPyTeye6P32X+7KNujVKtSYJg+viEu/mx2etJZCgnD57OPfGRh3n8nfizA15j3Av4XAAD//5k1S2w3zfwVAAAAAElFTkSuQmCC",le=Xe.create({baseURL:"./",timeout:3e4,headers:{"Content-Type":"application/json"}});le.interceptors.request.use(l=>l,l=>Promise.reject(l));le.interceptors.response.use(l=>l,l=>(console.error("API Error:",l),l.response?console.error("Response error:",l.response.data):l.request?console.error("No response received"):console.error("Request setup error:",l.message),Promise.reject(l)));const tt=Ke("devices",{state:()=>({devices:[],loading:!1,error:null,selectedDevice:null}),getters:{deviceById:l=>v=>l.devices.find(r=>r.id===v),devicesByType:l=>v=>l.devices.filter(r=>r.entity_type===v),deviceCount:l=>l.devices.length,hasDevices:l=>l.devices.length>0},actions:{async loadDevices(l=!1){this.loading=!0,this.error=null;try{const v=l?`/api/devices/managed?_t=${Date.now()}`:"/api/devices/managed",r=await le.get(v);this.devices=r.data.devices||[],console.log("ğŸ“¥ Loaded devices:",this.devices),this.devices.forEach(b=>{console.log(`ğŸ“¥ Device "${b.name}":`,{id:b.id,device:b.device,commands:b.commands,commandCount:b.commands?Object.keys(b.commands).length:0})})}catch(v){this.error=v.message,console.error("Error loading devices:",v)}finally{this.loading=!1}},async createDevice(l){this.loading=!0,this.error=null;try{console.log("ğŸª Store: Creating device with data:",l),console.log("ğŸª Store: Device commands being sent:",l.commands);const v={device_name:l.name,device:l.device,area_id:l.area||"",area_name:l.area||"",entity_type:l.entity_type,icon:l.icon,broadlink_entity:l.broadlink_entity,device_type:l.device_type||"broadlink",commands:l.commands||{}};l.device_type==="smartir"&&l.smartir_config&&(v.smartir_config=l.smartir_config),console.log("ğŸª Store: Transformed data for backend:",v);const r=await le.post("/api/devices/managed",v);return console.log("ğŸª Store: Create response:",r.data),await this.loadDevices(),r.data}catch(v){throw console.error("Error creating device:",v),v}finally{this.loading=!1}},async updateDevice(l,v){this.loading=!0,this.error=null;try{const r=await le.put(`/api/devices/managed/${l}`,v);return await this.loadDevices(),r.data}catch(r){throw console.error("Error updating device:",r),r}finally{this.loading=!1}},async deleteDevice(l,v=!1){this.loading=!0,this.error=null;try{await le.delete(`/api/devices/managed/${l}`,{data:{delete_commands:v}}),this.devices=this.devices.filter(r=>r.id!==l)}catch(r){throw this.error=r.message,console.error("Error deleting device:",r),r}finally{this.loading=!1}},selectDevice(l){this.selectedDevice=l},clearSelection(){this.selectedDevice=null},clearError(){this.error=null},async syncAllAreas(){if(!this.devices||this.devices.length===0){console.log("âš ï¸ No devices to sync");return}console.log(`ğŸ”„ Syncing areas from Home Assistant for ${this.devices.length} devices...`);try{const l=await Promise.all(this.devices.map(b=>(console.log(`ğŸ”„ Syncing device: ${b.id} (${b.name})`),le.post(`/api/devices/${b.id}/sync-area`).then(d=>d.data.success&&d.data.area?(console.log(`âœ… Synced area for ${b.name}: ${d.data.area}`),{status:"synced",device:b.name}):{status:"no_area"}).catch(d=>{var p;return((p=d.response)==null?void 0:p.status)===404?(console.log(`âŒ Device not found in HA: ${b.id}`),{status:"not_found"}):(console.warn(`âš ï¸ Failed to sync area for ${b.id}:`,d.message),{status:"error",error:d.message})})))),v=l.filter(b=>b.status==="synced").length,r=l.filter(b=>b.status==="not_found").length;await this.loadDevices(!0),v>0?console.log(`âœ… Area sync complete: ${v} synced, ${r} not found in HA`):r>0&&console.log(`â„¹ï¸ No areas synced - ${r} entities not found in HA registry (generate entities first)`)}catch(l){console.debug("Area sync error:",l)}}}}),ot=""+new URL("broadlink-logo-BDjImjRY.png",import.meta.url).href,be=(l,v)=>{const r=l.__vccOpts||l;for(const[b,d]of v)r[b]=d;return r},lt={class:"device-header"},st={class:"device-icon"},nt={class:"device-info"},at={class:"device-labels"},it={class:"device-type"},rt=["src","alt","title"],dt={class:"device-body"},ut={class:"device-stats"},ct={class:"stat"},mt={class:"stat"},vt={class:"device-meta"},pt={class:"device-id"},ft={key:0,class:"storage-name"},gt={key:1,class:"broadlink-entity"},yt={key:2,class:"controller-device"},bt={class:"device-actions"},ht=["disabled"],kt=["disabled"],wt=["disabled"],$t={key:0,class:"disabled-overlay"},Ct={__name:"DeviceCard",props:{device:{type:Object,required:!0},broadlinkDevices:{type:Array,default:()=>[]}},emits:["edit","delete","learn"],setup(l){const v=l,r=W(()=>localStorage.getItem("smartir_simulate_not_installed")==="true"),b=W(()=>v.device.device_type==="smartir"&&r.value),d=k(null),p=W(()=>v.device.icon?v.device.icon.replace("mdi:",""):{light:"lightbulb",fan:"fan",switch:"light-switch",media_player:"television",cover:"window-shutter"}[v.device.entity_type]||"devices"),w=W(()=>({light:"Light",fan:"Fan",switch:"Switch",media_player:"Media Player",cover:"Cover"})[v.device.entity_type]||v.device.entity_type),t=W(()=>(v.device.device_type||"broadlink")==="smartir"?"SmartIR":"Broadlink"),u=W(()=>(v.device.device_type||"broadlink")==="smartir"?Ue:ot),x=W(()=>(v.device.device_type||"broadlink")==="smartir"?d.value!==null?d.value:0:Object.keys(v.device.commands||{}).length),M=D=>{if(!D)return"";const $=v.broadlinkDevices.find(R=>R.entity_id===D);return $&&$.name||D},y=W(()=>{if(!v.device.device)return!1;const D=v.device.id.includes(".")?v.device.id.split(".")[1]:v.device.id;return v.device.device!==D}),o=W(()=>{if(!v.device.broadlink_entity)return"";const D=v.broadlinkDevices.find($=>$.entity_id===v.device.broadlink_entity);return D&&D.name||v.device.broadlink_entity}),_=async()=>{if(!(!v.device.device_code||!v.device.entity_type))try{const D=await le.get("/api/smartir/codes/code",{params:{entity_type:v.device.entity_type,code_id:v.device.device_code}});if(D.data.success&&D.data.code){const $=D.data.code;$.commands&&(d.value=Object.keys($.commands).length)}}catch(D){console.error("Error fetching SmartIR command count:",D)}};return Se(async()=>{(v.device.device_type||"broadlink")==="smartir"&&await _()}),(D,$)=>(a(),i("div",{class:Z(["device-card",{disabled:b.value}])},[e("div",lt,[e("div",st,[e("i",{class:Z(`mdi mdi-${p.value}`)},null,2)]),e("div",nt,[e("h3",null,g(l.device.name),1),e("div",at,[e("span",it,g(w.value),1)])]),e("img",{src:u.value,alt:t.value,title:t.value,class:"device-source-logo"},null,8,rt)]),e("div",dt,[e("div",ut,[e("div",ct,[$[3]||($[3]=e("i",{class:"mdi mdi-remote"},null,-1)),e("span",null,g(x.value)+" commands",1)]),e("div",mt,[$[4]||($[4]=e("i",{class:"mdi mdi-map-marker"},null,-1)),e("span",null,g(l.device.area||"No area"),1)])]),e("div",vt,[e("span",pt,[$[5]||($[5]=e("i",{class:"mdi mdi-identifier"},null,-1)),C(" "+g(l.device.id),1)]),y.value?(a(),i("span",ft,[$[6]||($[6]=e("i",{class:"mdi mdi-code-tags"},null,-1)),C(" "+g(l.device.device),1)])):A("",!0),l.device.broadlink_entity?(a(),i("span",gt,[$[7]||($[7]=e("i",{class:"mdi mdi-access-point"},null,-1)),C(" "+g(o.value),1)])):A("",!0),l.device.controller_device?(a(),i("span",yt,[$[8]||($[8]=e("i",{class:"mdi mdi-access-point"},null,-1)),C(" Controller: "+g(M(l.device.controller_device)),1)])):A("",!0)])]),e("div",bt,[e("button",{onClick:$[0]||($[0]=R=>!b.value&&D.$emit("learn",l.device)),class:"action-btn",title:"Manage Commands",disabled:b.value},[...$[9]||($[9]=[e("i",{class:"mdi mdi-remote-tv"},null,-1),e("span",null,"Commands",-1)])],8,ht),e("button",{onClick:$[1]||($[1]=R=>!b.value&&D.$emit("edit",l.device)),class:"action-btn",title:"Edit",disabled:b.value},[...$[10]||($[10]=[e("i",{class:"mdi mdi-pencil"},null,-1)])],8,kt),e("button",{onClick:$[2]||($[2]=R=>!b.value&&D.$emit("delete",l.device)),class:"action-btn danger",title:"Delete",disabled:b.value},[...$[11]||($[11]=[e("i",{class:"mdi mdi-delete"},null,-1)])],8,wt)]),b.value?(a(),i("div",$t,[...$[12]||($[12]=[e("div",{class:"disabled-message"},[e("i",{class:"mdi mdi-eye-off"}),e("span",null,"SmartIR Not Installed")],-1)])])):A("",!0)],2))}},St=be(Ct,[["__scopeId","data-v-cdda49f7"]]),_t={class:"icon-picker"},It={class:"icon-input-wrapper"},xt=["id","placeholder"],Dt={key:0,class:"icon-preview"},Tt={key:0,class:"icon-dropdown"},Rt={class:"icon-grid"},At=["onMousedown","title"],Lt={__name:"IconPicker",props:{modelValue:{type:String,default:""},inputId:{type:String,default:"icon-input"},placeholder:{type:String,default:"e.g., mdi:television"}},emits:["update:modelValue"],setup(l,{emit:v}){const r=l,b=v,d=k(r.modelValue),p=k(!1),w=["television","speaker","radio","music","video","movie","play","pause","stop","skip-next","skip-previous","volume-high","volume-medium","volume-low","volume-off","remote","remote-tv","cast","chromecast","spotify","netflix","youtube","lightbulb","lightbulb-on","lightbulb-off","lamp","floor-lamp","ceiling-light","light-switch","led-strip","led-strip-variant","wall-sconce","chandelier","spotlight","track-light","vanity-light","desk-lamp","fan","ceiling-fan","air-conditioner","thermometer","thermostat","heat-wave","snowflake","fire","radiator","water-boiler","hvac","blinds","blinds-open","window-shutter","window-shutter-open","curtains","curtains-closed","roller-shade","roller-shade-closed","garage","garage-open","gate","door","door-open","window-open","window-closed","washing-machine","tumble-dryer","dishwasher","refrigerator","stove","microwave","oven","toaster","kettle","coffee","coffee-maker","blender","robot-vacuum","robot-vacuum-variant","vacuum","broom","spray-bottle","lock","lock-open","lock-smart","key","shield","shield-check","alarm-light","bell","doorbell","camera","cctv","motion-sensor","smoke-detector","fire-extinguisher","water-alert","gas-cylinder","sofa","bed","bed-double","desk","chair","table","bookshelf","home","home-outline","home-assistant","floor-plan","room","weather-sunny","weather-night","weather-cloudy","weather-rainy","weather-snowy","weather-lightning","weather-windy","weather-fog","weather-partly-cloudy","umbrella","water","water-percent","phone","cellphone","tablet","laptop","desktop-tower","monitor","keyboard","mouse","printer","router","router-wireless","access-point","wifi","bluetooth","usb","hdmi-port","ethernet","power","power-plug","power-socket","battery","battery-charging","lightning-bolt","flash","solar-panel","solar-power","leaf","tree","flower","sprout","grass","watering-can","shovel","fence","pool","hot-tub","silverware","silverware-fork-knife","food","food-apple","glass-wine","glass-cocktail","bottle-wine","pot","pot-steam","shower","shower-head","bathtub","toilet","sink","faucet","hand-wash","car","car-side","garage-variant","tools","hammer","wrench","screwdriver","toolbox","ladder","heart","heart-pulse","run","walk","bike","dumbbell","yoga","scale-bathroom","thermometer-lines","clock","clock-outline","timer","alarm","calendar","calendar-today","calendar-clock","history","bell-ring","bell-alert","alert","alert-circle","information","help-circle","check","check-circle","close-circle","minus-circle","plus-circle","arrow-up","arrow-down","arrow-left","arrow-right","chevron-up","chevron-down","menu","dots-vertical","dots-horizontal","cog","tune","circle","square","triangle","hexagon","star","star-outline","heart-outline","plus","minus","close","check-bold","eye","eye-off","account","account-group","baby","dog","cat","paw","gift","balloon","party-popper","candle","book","book-open","newspaper","email","message","phone-classic"];re(()=>r.modelValue,y=>{d.value=y});const t=W(()=>{if(!d.value)return w.slice(0,50);const y=d.value.toLowerCase().replace("mdi:","");return w.filter(o=>o.toLowerCase().includes(y)).slice(0,50)}),u=()=>{p.value=!0,b("update:modelValue",d.value)},x=()=>{setTimeout(()=>{p.value=!1},200)},M=y=>{d.value=`mdi:${y}`,b("update:modelValue",d.value),p.value=!1};return(y,o)=>(a(),i("div",_t,[e("div",It,[J(e("input",{id:l.inputId,"onUpdate:modelValue":o[0]||(o[0]=_=>d.value=_),type:"text",placeholder:l.placeholder,onInput:u,onFocus:o[1]||(o[1]=_=>p.value=!0),onBlur:x},null,40,xt),[[$e,d.value]]),d.value?(a(),i("div",Dt,[e("i",{class:Z(`mdi mdi-${d.value.replace("mdi:","")}`)},null,2)])):A("",!0)]),p.value&&t.value.length>0?(a(),i("div",Tt,[e("div",Rt,[(a(!0),i(de,null,ye(t.value,_=>(a(),i("div",{key:_,class:"icon-option",onMousedown:ae(D=>M(_),["prevent"]),title:_},[e("i",{class:Z(`mdi mdi-${_}`)},null,2),e("span",null,g(_),1)],40,At))),128))])])):A("",!0)]))}},Mt=be(Lt,[["__scopeId","data-v-a64f5011"]]),Ot={key:0,class:"dropdown-label"},Et={key:0,class:"required"},Vt=["placeholder","disabled","onKeydown"],Pt={class:"dropdown-icons"},Ut={key:0,class:"mdi mdi-loading mdi-spin"},jt={key:2,class:"mdi mdi-chevron-down"},Ft={key:1,class:"error-message"},Nt={key:2,class:"hint-message"},Bt={key:0,class:"dropdown-menu"},Ht=["onMousedown","onMouseenter"],qt={class:"option-content"},zt={class:"option-label"},Jt={key:0,class:"option-description"},Wt={key:0,class:"mdi mdi-check selected-icon"},Gt={key:3,class:"dropdown-menu"},Xt={__name:"SearchableDropdown",props:{modelValue:{type:[String,Number,Object],default:null},options:{type:Array,required:!0,default:()=>[]},label:{type:String,default:""},placeholder:{type:String,default:"Search..."},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},error:{type:String,default:""},hint:{type:String,default:""},optionLabel:{type:String,default:"label"},optionValue:{type:String,default:"value"},optionDescription:{type:String,default:"description"},filterMethod:{type:Function,default:null}},emits:["update:modelValue","change","search"],setup(l,{emit:v}){const r=l,b=v,d=k(null),p=k(null),w=k(""),t=k(!1),u=k(0),x=k(!1),M=I=>typeof I=="string"||typeof I=="number"?I:I[r.optionLabel]||I.label||I.name||String(I),y=I=>typeof I=="string"||typeof I=="number"?I:I[r.optionValue]||I.value||I.id||I,o=I=>typeof I=="string"||typeof I=="number"?"":I[r.optionDescription]||I.description||"",_=I=>{const V=y(I);return typeof r.modelValue=="object"?y(r.modelValue)===V:r.modelValue===V},D=W(()=>{if(!w.value)return r.options;if(r.filterMethod)return r.options.filter(V=>r.filterMethod(V,w.value));const I=w.value.toLowerCase();return r.options.filter(V=>{const G=M(V).toLowerCase(),se=o(V).toLowerCase();return G.includes(I)||se.includes(I)})}),$=W(()=>{if(!r.modelValue)return"";const I=r.options.find(V=>{const G=y(V);return typeof r.modelValue=="object"?G===y(r.modelValue):G===r.modelValue});return I?M(I):""});re(()=>r.modelValue,I=>{x.value||(w.value=$.value)}),re(()=>r.options,()=>{!x.value&&r.modelValue&&(w.value=$.value)},{deep:!0}),re(w,I=>{b("search",I),u.value=0}),Se(()=>{w.value=$.value});const R=()=>{var I;x.value=!0,t.value=!0,(I=p.value)==null||I.select()},j=()=>{x.value=!1,setTimeout(()=>{t.value=!1,r.modelValue?w.value=$.value:w.value=""},200)},P=()=>{var I;t.value=!1,(I=p.value)==null||I.blur()},c=I=>{const V=y(I);b("update:modelValue",V),b("change",V,I),w.value=M(I),P()},F=()=>{var I;b("update:modelValue",null),b("change",null,null),w.value="",(I=p.value)==null||I.focus()},X=()=>{if(!t.value){t.value=!0;return}u.value<D.value.length-1&&u.value++},te=()=>{u.value>0&&u.value--},Q=()=>{D.value.length>0&&u.value>=0&&c(D.value[u.value])},ge=I=>{d.value&&!d.value.contains(I.target)&&(t.value=!1,r.modelValue?w.value=$.value:w.value="")};return Se(()=>{document.addEventListener("click",ge)}),Be(()=>{document.removeEventListener("click",ge)}),(I,V)=>(a(),i("div",{class:"searchable-dropdown",ref_key:"dropdownRef",ref:d},[l.label?(a(),i("label",Ot,[C(g(l.label)+" ",1),l.required?(a(),i("span",Et,"*")):A("",!0)])):A("",!0),e("div",{class:Z(["dropdown-input-wrapper",{"has-error":l.error,disabled:l.disabled}])},[J(e("input",{ref_key:"inputRef",ref:p,type:"text","onUpdate:modelValue":V[0]||(V[0]=G=>w.value=G),placeholder:l.placeholder,disabled:l.disabled||l.loading,onFocus:R,onBlur:j,onKeydown:[Oe(ae(X,["prevent"]),["down"]),Oe(ae(te,["prevent"]),["up"]),Oe(ae(Q,["prevent"]),["enter"]),Oe(P,["escape"])],class:"dropdown-input"},null,40,Vt),[[$e,w.value]]),e("div",Pt,[l.loading?(a(),i("i",Ut)):l.modelValue&&!l.disabled?(a(),i("i",{key:1,class:"mdi mdi-close-circle clear-icon",onClick:F})):(a(),i("i",jt))])],2),l.error?(a(),i("div",Ft,g(l.error),1)):A("",!0),l.hint&&!l.error?(a(),i("div",Nt,g(l.hint),1)):A("",!0),ie(He,{name:"dropdown"},{default:Pe(()=>[t.value&&D.value.length>0?(a(),i("div",Bt,[(a(!0),i(de,null,ye(D.value,(G,se)=>(a(),i("div",{key:y(G),class:Z(["dropdown-item",{highlighted:se===u.value,selected:_(G)}]),onMousedown:ae(he=>c(G),["prevent"]),onMouseenter:he=>u.value=se},[e("div",qt,[e("div",zt,g(M(G)),1),o(G)?(a(),i("div",Jt,g(o(G)),1)):A("",!0)]),_(G)?(a(),i("i",Wt)):A("",!0)],42,Ht))),128))])):A("",!0)]),_:1}),t.value&&D.value.length===0&&!l.loading?(a(),i("div",Gt,[...V[1]||(V[1]=[e("div",{class:"dropdown-item no-results"},[e("i",{class:"mdi mdi-magnify"}),C(" No results found ")],-1)])])):A("",!0)],512))}},Fe=be(Xt,[["__scopeId","data-v-679ce35f"]]),Kt={class:"smartir-selector"},Yt={class:"form-group"},Zt={class:"form-group"},Qt={class:"form-group"},eo=["value"],to={key:0,class:"error-message"},oo={class:"form-group"},lo={class:"form-group"},so={key:1,class:"code-info"},no={class:"info-content"},ao={class:"info-row"},io={class:"info-value"},ro={class:"info-row"},uo={class:"info-value"},co={key:0,class:"info-row"},mo={class:"info-value"},vo={class:"info-row"},po={class:"info-value"},fo={__name:"SmartIRDeviceSelector",props:{entityType:{type:String,required:!0},modelValue:{type:Object,default:()=>({})},broadlinkDevices:{type:Array,default:()=>[]}},emits:["update:modelValue","change"],setup(l,{expose:v,emit:r}){const b=l,d=r,p=k([]),w=k([]),t=k(""),u=k(""),x=k(""),M=k(""),y=k(""),o=k(null),_=k(!1),D=k(!1),$=k({manufacturer:"",model:"",controller:""});Se(async()=>{if(await R(),b.modelValue&&(t.value=b.modelValue.manufacturer||"",u.value=b.modelValue.device_code||"",x.value=b.modelValue.controller_device||"",M.value=b.modelValue.temperature_sensor||"",y.value=b.modelValue.humidity_sensor||"",t.value&&(await j(t.value),u.value&&w.value.length>0))){const I=w.value.find(V=>V.code===u.value);I&&(o.value={code:I.code,manufacturer:t.value,models:I.models,controller:I.controller})}}),re(()=>b.entityType,async I=>{I&&(t.value="",u.value="",w.value=[],o.value=null,await R())});const R=async()=>{if(b.entityType){_.value=!0,$.value.manufacturer="";try{const I=await le.get("/api/smartir/codes/manufacturers",{params:{entity_type:b.entityType}});if(I.data.success)p.value=I.data.manufacturers||[];else throw new Error(I.data.error||"Failed to load manufacturers")}catch(I){console.error("Error loading manufacturers:",I),$.value.manufacturer="Failed to load manufacturers. Please try again.",p.value=[]}finally{_.value=!1}}},j=async I=>{if(!(!I||!b.entityType)){D.value=!0,$.value.model="";try{const V=await le.get("/api/smartir/codes/models",{params:{entity_type:b.entityType,manufacturer:I}});if(V.data.success){const G=V.data.models||[];w.value=G.map(se=>{const he=se.models&&se.models.length>0?se.models.join(", "):`Code ${se.code}`;return{code:se.code,label:he,description:`Code: ${se.code}`,models:se.models,controller:se.controller}})}else throw new Error(V.data.error||"Failed to load models")}catch(V){console.error("Error loading models:",V),$.value.model="Failed to load models. Please try again.",w.value=[]}finally{D.value=!1}}},P=async I=>{t.value=I,u.value="",o.value=null,w.value=[],I&&await j(I),Q()},c=()=>{const I=w.value.find(V=>V.code===u.value);I&&(o.value={code:I.code,manufacturer:t.value,models:I.models,controller:I.controller}),Q()},F=()=>{Q()},X=()=>{Q()},te=()=>{Q()},Q=()=>{var V,G;const I={manufacturer:t.value,model:((G=(V=o.value)==null?void 0:V.models)==null?void 0:G[0])||"",device_code:u.value,controller_device:x.value};b.entityType==="climate"&&(M.value&&(I.temperature_sensor=M.value),y.value&&(I.humidity_sensor=y.value)),d("update:modelValue",I),d("change",I)};return v({validate:()=>{let I=!0;return $.value={manufacturer:"",model:"",controller:""},t.value||($.value.manufacturer="Manufacturer is required",I=!1),u.value||($.value.model="Model is required",I=!1),x.value||($.value.controller="Broadlink controller is required",I=!1),I}}),(I,V)=>(a(),i("div",Kt,[e("div",Yt,[ie(Fe,{modelValue:t.value,"onUpdate:modelValue":V[0]||(V[0]=G=>t.value=G),options:p.value,label:"Manufacturer",placeholder:"Search manufacturers...",required:"",loading:_.value,error:$.value.manufacturer,hint:"Select the device manufacturer",onChange:P},null,8,["modelValue","options","loading","error"])]),e("div",Zt,[ie(Fe,{modelValue:u.value,"onUpdate:modelValue":V[1]||(V[1]=G=>u.value=G),options:w.value,"option-label":"label","option-value":"code","option-description":"description",label:"Model",placeholder:"Search models...",required:"",disabled:!t.value,loading:D.value,error:$.value.model,hint:"Select the device model",onChange:c},null,8,["modelValue","options","disabled","loading","error"])]),e("div",Qt,[V[6]||(V[6]=e("label",{for:"controller-device"},[e("i",{class:"mdi mdi-remote"}),C(" Controller Device * ")],-1)),J(e("select",{id:"controller-device","onUpdate:modelValue":V[2]||(V[2]=G=>x.value=G),required:"",onChange:F},[V[5]||(V[5]=e("option",{value:""},"-- Select Controller Device --",-1)),(a(!0),i(de,null,ye(l.broadlinkDevices,G=>(a(),i("option",{key:G.entity_id,value:G.entity_id},[C(g(G.name||G.entity_id)+" ",1),G.area_name?(a(),i(de,{key:0},[C(" - "+g(G.area_name),1)],64)):A("",!0)],8,eo))),128))],544),[[Ce,x.value]]),V[7]||(V[7]=e("small",null,"Which remote device will send the IR/RF commands",-1)),$.value.controller?(a(),i("div",to,g($.value.controller),1)):A("",!0)]),l.entityType==="climate"?(a(),i(de,{key:0},[e("div",oo,[V[8]||(V[8]=e("label",{for:"temperature-sensor"},"Temperature Sensor",-1)),J(e("input",{id:"temperature-sensor","onUpdate:modelValue":V[3]||(V[3]=G=>M.value=G),type:"text",placeholder:"e.g., sensor.living_room_temperature",onInput:X},null,544),[[$e,M.value]]),V[9]||(V[9]=e("small",null,"Optional: Temperature sensor entity for current temperature",-1))]),e("div",lo,[V[10]||(V[10]=e("label",{for:"humidity-sensor"},"Humidity Sensor",-1)),J(e("input",{id:"humidity-sensor","onUpdate:modelValue":V[4]||(V[4]=G=>y.value=G),type:"text",placeholder:"e.g., sensor.living_room_humidity",onInput:te},null,544),[[$e,y.value]]),V[11]||(V[11]=e("small",null,"Optional: Humidity sensor entity for current humidity",-1))])],64)):A("",!0),o.value?(a(),i("div",so,[V[16]||(V[16]=e("div",{class:"info-header"},[e("i",{class:"mdi mdi-information"}),e("span",null,"Selected Device Code")],-1)),e("div",no,[e("div",ao,[V[12]||(V[12]=e("span",{class:"info-label"},"Code ID:",-1)),e("span",io,g(o.value.code_id),1)]),e("div",ro,[V[13]||(V[13]=e("span",{class:"info-label"},"Manufacturer:",-1)),e("span",uo,g(o.value.manufacturer),1)]),o.value.models&&o.value.models.length>0?(a(),i("div",co,[V[14]||(V[14]=e("span",{class:"info-label"},"Supported Models:",-1)),e("span",mo,g(o.value.models.join(", ")),1)])):A("",!0),e("div",vo,[V[15]||(V[15]=e("span",{class:"info-label"},"Controller:",-1)),e("span",po,g(o.value.controller||"Broadlink"),1)])])])):A("",!0)]))}},go=be(fo,[["__scopeId","data-v-1911c8f6"]]),yo={class:"modal-content"},bo={class:"modal-header"},ho={class:"form-group"},ko={class:"form-group"},wo=["disabled"],$o={key:0,class:"smartir-notice"},Co={key:0,class:"notice-success"},So={key:1,class:"notice-warning"},_o={key:1,class:"smartir-notice"},Io={key:2},xo={class:"form-group"},Do=["disabled"],To=["disabled"],Ro={key:0},Ao={key:1},Lo={key:2},Mo={key:3},Oo={key:0,class:"form-group"},Eo={class:"area-display-readonly"},Vo=["value"],Po=["disabled"],Uo=["href"],jo={key:1,class:"form-group"},Fo={class:"form-group"},No={key:2,class:"form-group"},Bo=["value"],Ho=["value"],qo={key:2},zo={key:3},Jo={key:3,class:"smartir-section"},Wo={class:"modal-footer"},Go={type:"submit",form:"device-form",class:"btn btn-primary"},Xo={__name:"DeviceForm",props:{device:{type:Object,default:null}},emits:["save","cancel"],setup(l,{emit:v}){const r=l,b=v,d=we("smartirStatus"),p=we("smartirEnabled"),w=W(()=>{var m;return localStorage.getItem("smartir_simulate_not_installed")==="true"?!1:((m=d==null?void 0:d.value)==null?void 0:m.installed)||!1}),t=W(()=>!!r.device),u=W(()=>["climate","media_player","fan","light"].includes(o.value.entity_type)),x=W(()=>w.value?!u.value&&o.value.entity_type?"(Not supported for this type)":"(Pre-configured Codes)":"(Requires SmartIR)"),M=W(()=>{var m;const h=((m=r.device)==null?void 0:m.commands)||{};return Object.keys(h).length>0}),y=W(()=>{if(!o.value.broadlink_entity)return"";const h=R.value.find(m=>m.entity_id===o.value.broadlink_entity);return h&&h.name||o.value.broadlink_entity}),o=k({name:"",entity_type:"",device_type:"broadlink",device:"",area:"",icon:"",broadlink_entity:"",enabled:!0,commands:{}}),_=k({}),D=k(null),$=k([]),R=k([]),j=k(null),P=k(null),c=k(null),F=k(!1);Se(async()=>{r.device&&(o.value={...r.device,device_type:r.device.device_type||"broadlink"},o.value.device_type==="smartir"&&(_.value={manufacturer:r.device.manufacturer,model:r.device.model,device_code:r.device.device_code,controller_device:r.device.controller_device,temperature_sensor:r.device.temperature_sensor,humidity_sensor:r.device.humidity_sensor})),await Promise.all([X(),te()]),j.value&&(j.value.setCustomValidity(""),j.value.oninvalid=()=>{j.value.setCustomValidity("Device name is required")}),P.value&&(P.value.setCustomValidity(""),P.value.oninvalid=()=>{P.value.setCustomValidity("Entity type is required")}),c.value&&(c.value.setCustomValidity(""),c.value.oninvalid=()=>{c.value.setCustomValidity("Broadlink device is required")})});const X=async()=>{try{const h=await le.get("/api/areas");$.value=h.data.areas||[]}catch(h){console.error("Error loading areas:",h),$.value=[]}},te=async()=>{try{const m=(await le.get("/api/remote/devices")).data.devices||[];R.value=m,console.log("Loaded remote devices:",m)}catch(h){console.error("Error loading remote devices:",h),R.value=[]}},Q=h=>{const m=h==="nameInput"?j.value:h==="typeSelect"?P.value:h==="broadlinkSelect"?c.value:null;m&&m.setCustomValidity("")},ge=h=>{if(!h)return"";const m=h.toLowerCase();for(const H of $.value){const ue=H.toLowerCase();if(m.includes(ue))return H}return""},I=(h,m="")=>{const H=m.toLowerCase();return H.includes("tv")?"mdi:television":H.includes("lamp")?"mdi:lamp":H.includes("ceiling")?"mdi:ceiling-light":H.includes("floor")?"mdi:floor-lamp":H.includes("desk")?"mdi:desk-lamp":H.includes("fan")?"mdi:fan":H.includes("ac")||H.includes("air con")?"mdi:air-conditioner":H.includes("heater")?"mdi:radiator":H.includes("blind")?"mdi:blinds":H.includes("curtain")?"mdi:curtains":H.includes("garage")?"mdi:garage":H.includes("speaker")||H.includes("stereo")?"mdi:speaker":H.includes("receiver")?"mdi:audio-video":{light:"mdi:lightbulb",fan:"mdi:fan",switch:"mdi:light-switch",media_player:"mdi:television",cover:"mdi:window-shutter",climate:"mdi:thermostat"}[h]||"mdi:devices"};re(()=>o.value.name,h=>{if(!t.value&&h&&!o.value.area){const m=ge(h);m&&(o.value.area=m)}!t.value&&h&&o.value.entity_type&&(F.value||!o.value.icon)&&(o.value.icon=I(o.value.entity_type,h),F.value=!0)}),re(()=>o.value.entity_type,h=>{!t.value&&h&&(F.value||!o.value.icon)&&(o.value.icon=I(h,o.value.name),F.value=!0)}),re(()=>o.value.icon,(h,m)=>{m!==void 0&&h!==m&&!F.value&&(F.value=!1),h||(F.value=!1)});const V=k(!1),G=async()=>{var h;if((h=r.device)!=null&&h.id){V.value=!0;try{const m=await le.post(`/api/devices/${r.device.id}/sync-area`);m.data.success?(o.value.area=m.data.area||"",m.data.area?console.log(`Area synced: ${m.data.area}`):console.log("No area assigned in Home Assistant")):console.warn(m.data.message||"Entity not found in HA")}catch(m){console.error("Failed to sync area:",m)}finally{V.value=!1}}},se=()=>{var H;return!((H=r.device)!=null&&H.id)||!o.value.entity_type?"#":`/config/entities/entity/${`${o.value.entity_type}.${r.device.id}`}`},he=async()=>{if(o.value.device_type==="smartir"){if(D.value&&!D.value.validate())return;const h={...o.value,smartir_config:{manufacturer:_.value.manufacturer,model:_.value.model,code_id:_.value.device_code,controller_device:_.value.controller_device}};b("save",h)}else b("save",{...o.value})},B=h=>{_.value=h};return(h,m)=>(a(),i("div",{class:"modal-overlay",onClick:m[11]||(m[11]=ae(H=>h.$emit("cancel"),["self"]))},[e("div",yo,[e("div",bo,[e("h2",null,g(t.value?"Edit Device":"Add New Device"),1),e("button",{onClick:m[0]||(m[0]=H=>h.$emit("cancel")),class:"close-btn"},[...m[12]||(m[12]=[e("i",{class:"mdi mdi-close"},null,-1)])])]),e("form",{id:"device-form",onSubmit:ae(he,["prevent"]),class:"modal-body"},[e("div",ho,[m[13]||(m[13]=e("label",{for:"device-name"},"Device Name *",-1)),J(e("input",{id:"device-name",ref_key:"nameInput",ref:j,"onUpdate:modelValue":m[1]||(m[1]=H=>o.value.name=H),type:"text",placeholder:"e.g., Living Room TV",required:"",onInput:m[2]||(m[2]=H=>Q("nameInput"))},null,544),[[$e,o.value.name]])]),e("div",ko,[m[20]||(m[20]=e("label",{for:"entity-type"},"Entity Type *",-1)),J(e("select",{id:"entity-type",ref_key:"typeSelect",ref:P,"onUpdate:modelValue":m[3]||(m[3]=H=>o.value.entity_type=H),required:"",onChange:m[4]||(m[4]=H=>Q("typeSelect"))},[m[14]||(m[14]=Re('<option value="" data-v-fe453a7b>-- Select Type --</option><option value="light" data-v-fe453a7b>ğŸ’¡ Light</option><option value="fan" data-v-fe453a7b>ğŸŒ€ Fan</option><option value="switch" data-v-fe453a7b>ğŸ”Œ Switch</option><option value="media_player" data-v-fe453a7b>ğŸ“º Media Player</option><option value="cover" data-v-fe453a7b>ğŸªŸ Cover (Blinds/Curtains)</option>',6)),e("option",{value:"climate",disabled:!w.value}," ğŸŒ¡ï¸ Climate "+g(w.value?"":"(Requires SmartIR)"),9,wo)],544),[[Ce,o.value.entity_type]]),o.value.entity_type==="climate"?(a(),i("div",$o,[w.value?(a(),i("div",Co,[...m[15]||(m[15]=[e("i",{class:"mdi mdi-check-circle"},null,-1),e("span",null,"SmartIR detected! Climate entities will be created via SmartIR profiles.",-1)])])):(a(),i("div",So,[...m[16]||(m[16]=[e("i",{class:"mdi mdi-alert"},null,-1),e("div",null,[e("strong",null,"SmartIR Required"),e("p",null,"Climate entities (AC, heaters) require SmartIR integration."),e("a",{href:"https://github.com/smartHomeHub/SmartIR",target:"_blank",class:"smartir-link"}," Install SmartIR â†’ ")],-1)])]))])):w.value&&["media_player","fan","light"].includes(o.value.entity_type)?(a(),i("div",_o,[...m[17]||(m[17]=[e("div",{class:"notice-info"},[e("i",{class:"mdi mdi-information"}),e("span",null,"ğŸ’¡ SmartIR available! You can use pre-configured codes or learn your own.")],-1)])])):!w.value&&o.value.entity_type?(a(),i("small",Io,[m[18]||(m[18]=C(" ğŸ’¡ Tip: Install ",-1)),m[19]||(m[19]=e("a",{href:"https://github.com/smartHomeHub/SmartIR",target:"_blank",class:"inline-link"},"SmartIR",-1)),C(" for pre-configured "+g(o.value.entity_type==="climate"?"climate":o.value.entity_type)+" device codes ",1)])):A("",!0)]),e("div",xo,[m[23]||(m[23]=e("label",{for:"device-type"},"Device Type *",-1)),J(e("select",{id:"device-type","onUpdate:modelValue":m[5]||(m[5]=H=>o.value.device_type=H),required:"",disabled:t.value},[m[21]||(m[21]=e("option",{value:""},"-- Select Device Type --",-1)),m[22]||(m[22]=e("option",{value:"broadlink"},"ğŸ“¡ Broadlink Device (Learn IR Codes)",-1)),_e(p)?(a(),i("option",{key:0,value:"smartir",disabled:!w.value||!u.value}," ğŸŒ SmartIR Device "+g(x.value),9,To)):A("",!0)],8,Do),[[Ce,o.value.device_type]]),t.value?(a(),i("small",Ro,"Cannot change device type after creation")):o.value.device_type==="smartir"?(a(),i("small",Ao,"Using pre-configured codes from SmartIR repository")):o.value.device_type==="broadlink"?(a(),i("small",Lo,"Learn and store your own IR codes")):(a(),i("small",Mo,"Choose how to configure this device"))]),t.value?(a(),i("div",Oo,[m[26]||(m[26]=e("label",{for:"device-area"},"Area",-1)),e("div",Eo,[e("input",{id:"device-area",value:o.value.area||"Not assigned",type:"text",readonly:"",class:"readonly-input"},null,8,Vo),e("button",{type:"button",onClick:G,disabled:V.value,class:"sync-area-btn",title:"Sync area from Home Assistant"},[e("i",{class:Z(V.value?"mdi mdi-loading mdi-spin":"mdi mdi-refresh")},null,2)],8,Po)]),e("small",null,[m[24]||(m[24]=e("i",{class:"mdi mdi-information-outline"},null,-1)),m[25]||(m[25]=C(" Set area in Home Assistant, then click sync. ",-1)),e("a",{href:se(),target:"_blank",class:"inline-link"},"Open in HA â†’",8,Uo)])])):(a(),i("div",jo,[...m[27]||(m[27]=[e("div",{class:"info-notice"},[e("i",{class:"mdi mdi-information-outline"}),e("span",null,[e("strong",null,"Area Assignment:"),C(" After generating entities and restarting Home Assistant, you can assign areas in HA and sync them here.")])],-1)])])),e("div",Fo,[m[28]||(m[28]=e("label",{for:"device-icon"},"Icon",-1)),ie(Mt,{modelValue:o.value.icon,"onUpdate:modelValue":m[6]||(m[6]=H=>o.value.icon=H),inputId:"device-icon",placeholder:"e.g., mdi:television"},null,8,["modelValue"]),m[29]||(m[29]=e("small",null,"Optional: Material Design Icon name",-1))]),o.value.device_type==="broadlink"?(a(),i("div",No,[m[31]||(m[31]=e("label",{for:"broadlink-entity"},"Remote Device *",-1)),!t.value||!M.value?J((a(),i("select",{key:0,id:"broadlink-entity",ref_key:"broadlinkSelect",ref:c,"onUpdate:modelValue":m[7]||(m[7]=H=>o.value.broadlink_entity=H),required:"",onChange:m[8]||(m[8]=H=>Q("broadlinkSelect"))},[m[30]||(m[30]=e("option",{value:""},"-- Select Remote Device --",-1)),(a(!0),i(de,null,ye(R.value,H=>(a(),i("option",{key:H.entity_id,value:H.entity_id},[C(g(H.name||H.entity_id)+" ",1),H.area_name?(a(),i(de,{key:0},[C(" - "+g(H.area_name),1)],64)):A("",!0)],8,Bo))),128))],544)),[[Ce,o.value.broadlink_entity]]):(a(),i("input",{key:1,id:"broadlink-entity",value:y.value,type:"text",readonly:"",disabled:""},null,8,Ho)),!t.value||!M.value?(a(),i("small",qo,"Required: Select which remote device to use for sending commands")):(a(),i("small",zo,"Cannot change remote device after commands are learned"))])):A("",!0),o.value.device_type==="smartir"?(a(),i("div",Jo,[m[32]||(m[32]=e("div",{class:"section-header"},[e("i",{class:"mdi mdi-cloud-download"}),e("span",null,"SmartIR Device Configuration")],-1)),ie(go,{ref_key:"smartirSelector",ref:D,"entity-type":o.value.entity_type,modelValue:_.value,"onUpdate:modelValue":m[9]||(m[9]=H=>_.value=H),"broadlink-devices":R.value,onChange:B},null,8,["entity-type","modelValue","broadlink-devices"])])):A("",!0)],32),e("div",Wo,[e("button",{type:"button",onClick:m[10]||(m[10]=H=>h.$emit("cancel")),class:"btn btn-secondary"}," Cancel "),e("button",Go,[m[33]||(m[33]=e("i",{class:"mdi mdi-check"},null,-1)),C(" "+g(t.value?"Update":"Create"),1)])])])]))}},Ko=be(Xo,[["__scopeId","data-v-fe453a7b"]]),Yo={class:"modal-header"},Zo={class:"modal-body"},Qo={class:"message-text"},el={key:0,class:"checkbox-option"},tl={class:"modal-footer"},ol={__name:"ConfirmDialog",props:{isOpen:{type:Boolean,default:!1},title:{type:String,default:"Confirm"},message:{type:String,required:!0},confirmText:{type:String,default:"OK"},cancelText:{type:String,default:"Cancel"},showCancel:{type:Boolean,default:!0},dangerMode:{type:Boolean,default:!1},checkboxLabel:{type:String,default:""}},emits:["confirm","cancel"],setup(l,{emit:v}){const r=l,b=v,d=k(!1);re(()=>r.isOpen,t=>{t&&(d.value=!1)});const p=()=>{b("confirm",d.value)},w=()=>{b("cancel")};return(t,u)=>l.isOpen?(a(),i("div",{key:0,class:"modal-overlay",onClick:ae(w,["self","stop"])},[e("div",{class:"modal-dialog confirm-dialog",onClick:u[1]||(u[1]=ae(()=>{},["stop"]))},[e("div",Yo,[e("h2",null,g(l.title),1)]),e("div",Zo,[e("p",Qo,g(l.message),1),l.checkboxLabel?(a(),i("div",el,[e("label",null,[J(e("input",{type:"checkbox","onUpdate:modelValue":u[0]||(u[0]=x=>d.value=x)},null,512),[[oe,d.value]]),e("span",null,g(l.checkboxLabel),1)])])):A("",!0)]),e("div",tl,[l.showCancel?(a(),i("button",{key:0,onClick:ae(w,["stop"]),class:"btn btn-secondary"},g(l.cancelText),1)):A("",!0),e("button",{onClick:ae(p,["stop"]),class:Z(["btn",l.dangerMode?"btn-danger":"btn-primary"])},g(l.confirmText),3)])])])):A("",!0)}},De=be(ol,[["__scopeId","data-v-6404e72a"]]),ll={class:"modal-content"},sl={class:"modal-header"},nl={class:"modal-body"},al={key:0,class:"smartir-info"},il={class:"form-group"},rl=["value"],dl={class:"form-group"},ul=["disabled"],cl={label:"Suggested Commands"},ml=["value"],vl=["disabled"],pl={class:"form-group"},fl={class:"radio-group"},gl={class:"radio-label"},yl=["disabled"],bl={class:"radio-label"},hl=["disabled"],kl={class:"learn-action"},wl=["disabled"],$l={key:0,class:"mdi mdi-loading mdi-spin"},Cl={key:1,class:"mdi mdi-remote-tv"},Sl={key:0,class:"learning-status"},_l={key:1,class:"result-message success"},Il={key:2,class:"section-divider"},xl={key:3,class:"learned-commands"},Dl={class:"command-list"},Tl={class:"command-name"},Rl={key:0,class:"command-status testing"},Al={key:1,class:"command-status success"},Ll={class:"command-actions"},Ml=["onClick","disabled"],Ol=["onClick","disabled"],El={key:4,class:"untracked-commands"},Vl={class:"command-list"},Pl={class:"command-name"},Ul={class:"modal-footer"},jl=["disabled"],Fl={__name:"CommandLearner",props:{device:{type:Object,required:!0}},emits:["cancel","learned"],setup(l,{emit:v}){const r=l,b=v,d=k([]),p=k(""),w=k(""),t=k(""),u=k("ir"),x=k(!1),M=k(""),y=k("success"),o=k([]),_=k([]),D=k(!1),$=k(""),R=k(!1),j=k(null),P=k(null),c=k(""),F=k(""),X=W(()=>r.device.device_type==="smartir");W(()=>{if(X.value)return!1;const S=w.value==="__custom__"?t.value:w.value;return p.value&&S.trim()});const te=()=>{j.value&&j.value.setCustomValidity("")},Q=()=>{P.value&&P.value.setCustomValidity("")},ge=W(()=>{const S=d.value.find(s=>s.entity_id===p.value);return S?S.name||S.entity_id:p.value}),I={light:["turn_on","turn_off","toggle","brightness_up","brightness_down","dim","bright"],fan:["turn_on","turn_off","toggle","speed_low","speed_medium","speed_high","speed_1","speed_2","speed_3","speed_4","speed_5","oscillate_on","oscillate_off","direction_forward","direction_reverse"],switch:["turn_on","turn_off","toggle"],media_player:["turn_on","turn_off","toggle","volume_up","volume_down","volume_mute","play","pause","stop","play_pause","next_track","previous_track","channel_up","channel_down","source_hdmi1","source_hdmi2","source_hdmi3","source_tv","source_aux","source_bluetooth","menu","home","back","select","arrow_up","arrow_down","arrow_left","arrow_right"],cover:["open","close","stop","open_tilt","close_tilt","position_0","position_25","position_50","position_75","position_100"]},V=W(()=>{const S=r.device.entity_type||"switch";return I[S]||I.switch});Se(async()=>{await G(),await se(),await ue(),j.value&&(j.value.setCustomValidity(""),j.value.oninvalid=()=>{j.value.setCustomValidity("Command name is required")}),r.device.broadlink_entity&&(p.value=r.device.broadlink_entity)}),re(w,async S=>{S==="__custom__"&&(await qe(),P.value&&(P.value.setCustomValidity(""),P.value.oninvalid=()=>{P.value.setCustomValidity("Custom command name is required")}))});const G=async()=>{try{const S=await le.get("/api/broadlink/devices");d.value=S.data.devices||[]}catch(S){console.error("Error loading Broadlink devices:",S)}},se=async()=>{try{if(X.value){const S=await le.get("/api/smartir/codes/code",{params:{entity_type:r.device.entity_type,code_id:r.device.device_code}});if(S.data.success&&S.data.code){const s=S.data.code.commands||{};o.value=Object.keys(s)}}else{if(console.log("ğŸ“‹ Loading commands for device:",r.device),console.log("ğŸ“‹ Device commands:",r.device.commands),console.log("ğŸ“‹ Device ID:",r.device.id),r.device.commands&&Object.keys(r.device.commands).length>0)console.log("âœ… Using commands from device object"),o.value=Object.keys(r.device.commands);else if(r.device.id){console.log("ğŸŒ Fetching commands from API for device ID:",r.device.id);const s=(await le.get(`/api/commands/${r.device.id}`)).data.commands||{};o.value=Object.keys(s)}else console.log("âš ï¸ No commands found and no device ID");console.log("ğŸ“‹ Final learned commands:",o.value)}}catch(S){console.error("Error loading commands:",S)}},he=async()=>{var S,s;M.value="",y.value="",x.value=!0;try{let q=r.device.id.split(".")[1];r.device.device&&(q=r.device.device);const ne=w.value==="__custom__"?t.value:w.value,ve=await le.post("/api/commands/learn",{entity_id:p.value,device:q,device_id:r.device.id,command:ne.trim(),command_type:u.value});if(ve.data.success){M.value=`Command "${ne}" learned successfully!`,y.value="success",o.value.includes(ne)||o.value.push(ne);const pe=_.value.indexOf(ne);pe>-1&&_.value.splice(pe,1);const ke={...r.device.commands};ke[ne]=!0,w.value="",t.value="",b("learned",{commands:ke,commandName:ne})}else M.value=ve.data.error||"Failed to learn command",y.value="error"}catch(q){M.value=((s=(S=q.response)==null?void 0:S.data)==null?void 0:s.error)||"Error learning command",y.value="error"}finally{x.value=!1}},B=async S=>{try{F.value=S,c.value="";let s=r.device.id.split(".")[1];r.device.device&&(s=r.device.device);const q=X.value?r.device.controller_device:p.value||r.device.broadlink_entity;(await le.post("/api/commands/test",{entity_id:q,device:s,command:S,device_id:r.device.id})).data.success&&(c.value=S,setTimeout(()=>{c.value===S&&(c.value="")},2e3))}catch(s){M.value=`Failed to send command: ${s.message}`,y.value="error"}finally{F.value=""}},h=S=>{$.value=S,D.value=!0},m=()=>{D.value=!1,$.value=""},H=async()=>{const S=$.value;D.value=!1;try{await le.delete(`/api/commands/${r.device.id}/${S}`),await se(),await ue(),M.value=`Command "${S}" deleted`,y.value="success",b("learned")}catch(s){M.value=`Failed to delete command: ${s.message}`,y.value="error"}finally{$.value=""}},ue=async()=>{try{const S=r.device.device||r.device.id.split(".")[1],q=(await le.get("/api/commands/untracked")).data.untracked||{};q[S]?_.value=Object.keys(q[S].commands):_.value=[]}catch(S){console.error("Error loading untracked commands:",S),_.value=[]}},ce=()=>{_.value.length!==0&&(R.value=!0)},me=async()=>{R.value=!1;try{const S=r.device.device||r.device.id.split(".")[1],s=await le.post("/api/commands/import",{device_id:r.device.id,source_device:S,commands:_.value});s.data.success&&(M.value=`Imported ${s.data.imported_count} commands successfully!`,y.value="success",await se(),await ue(),b("learned"))}catch(S){M.value=`Failed to import commands: ${S.message}`,y.value="error"}};return(S,s)=>(a(),i("div",{class:"modal-overlay",onClick:s[7]||(s[7]=ae(q=>S.$emit("cancel"),["self"]))},[e("div",ll,[e("div",sl,[e("h2",null,g(X.value?"Commands for":"Learn Commands for")+" "+g(l.device.name),1),e("button",{onClick:s[0]||(s[0]=q=>S.$emit("cancel")),class:"close-btn"},[...s[8]||(s[8]=[e("i",{class:"mdi mdi-close"},null,-1)])])]),e("div",nl,[X.value?(a(),i("div",al,[s[12]||(s[12]=e("i",{class:"mdi mdi-information"},null,-1)),e("div",null,[s[11]||(s[11]=e("h3",null,"SmartIR Device",-1)),e("p",null,[s[9]||(s[9]=C("This device uses SmartIR code file ",-1)),e("strong",null,g(l.device.device_code),1),s[10]||(s[10]=C(". Commands are pre-configured and cannot be learned. View the commands below.",-1))])])])):(a(),i("form",{key:1,onSubmit:ae(he,["prevent"])},[e("div",il,[s[13]||(s[13]=e("label",{for:"broadlink-entity"},"Broadlink Device",-1)),e("input",{id:"broadlink-entity",value:ge.value,type:"text",readonly:"",disabled:""},null,8,rl),s[14]||(s[14]=e("small",null,"Commands will be learned using this device (set when device was created)",-1))]),e("div",dl,[s[17]||(s[17]=e("label",{for:"command-name"},"Command Name *",-1)),J(e("select",{id:"command-name",ref_key:"commandSelect",ref:j,"onUpdate:modelValue":s[1]||(s[1]=q=>w.value=q),disabled:x.value,required:"",onChange:te},[s[15]||(s[15]=e("option",{value:""},"-- Select or type command --",-1)),e("optgroup",cl,[(a(!0),i(de,null,ye(V.value,q=>(a(),i("option",{key:q,value:q},g(q),9,ml))),128))]),s[16]||(s[16]=e("option",{value:"__custom__"},"Custom command...",-1))],40,ul),[[Ce,w.value]]),w.value==="__custom__"?J((a(),i("input",{key:0,ref_key:"customCommandInput",ref:P,"onUpdate:modelValue":s[2]||(s[2]=q=>t.value=q),type:"text",placeholder:"Enter custom command name",disabled:x.value,required:"",class:"custom-command-input",onInput:Q},null,40,vl)),[[$e,t.value]]):A("",!0),e("small",null,"Select a suggested command for "+g(l.device.entity_type||"this device")+", or enter a custom one.",1)]),e("div",pl,[s[20]||(s[20]=e("label",null,"Command Type",-1)),e("div",fl,[e("label",gl,[J(e("input",{type:"radio","onUpdate:modelValue":s[3]||(s[3]=q=>u.value=q),value:"ir",disabled:x.value},null,8,yl),[[je,u.value]]),s[18]||(s[18]=e("span",null,"IR (Infrared)",-1))]),e("label",bl,[J(e("input",{type:"radio","onUpdate:modelValue":s[4]||(s[4]=q=>u.value=q),value:"rf",disabled:x.value},null,8,hl),[[je,u.value]]),s[19]||(s[19]=e("span",null,"RF (Radio Frequency)",-1))])])]),e("div",kl,[e("button",{type:"submit",class:"btn btn-primary btn-large",disabled:x.value},[x.value?(a(),i("i",$l)):(a(),i("i",Cl)),C(" "+g(x.value?"Learning...":"Learn Command"),1)],8,wl)]),x.value?(a(),i("div",Sl,[...s[21]||(s[21]=[e("i",{class:"mdi mdi-loading mdi-spin"},null,-1),e("p",null,"Point your remote at the Broadlink device and press the button...",-1),e("small",null,"This may take up to 30 seconds",-1)])])):A("",!0),M.value&&y.value==="success"&&!M.value.includes("sent successfully")?(a(),i("div",_l,[s[22]||(s[22]=e("i",{class:"mdi mdi-check-circle"},null,-1)),e("p",null,g(M.value),1)])):A("",!0)],32)),o.value.length>0||_.value.length>0?(a(),i("div",Il)):A("",!0),o.value.length>0?(a(),i("div",xl,[e("h3",null,"Tracked Commands ("+g(o.value.length)+")",1),e("div",Dl,[(a(!0),i(de,null,ye(o.value,q=>(a(),i("div",{key:q,class:Z(["command-item",{testing:F.value===q,tested:c.value===q}])},[e("span",Tl,g(q),1),F.value===q?(a(),i("span",Rl,[...s[23]||(s[23]=[e("i",{class:"mdi mdi-loading mdi-spin"},null,-1),C(" Sending... ",-1)])])):c.value===q?(a(),i("span",Al,[...s[24]||(s[24]=[e("i",{class:"mdi mdi-check-circle"},null,-1),C(" Sent! ",-1)])])):A("",!0),e("div",Ll,[e("button",{type:"button",onClick:ne=>B(q),class:"icon-btn",title:"Test",disabled:F.value!==""},[...s[25]||(s[25]=[e("i",{class:"mdi mdi-play"},null,-1)])],8,Ml),e("button",{type:"button",onClick:ne=>h(q),class:"icon-btn danger",title:"Delete",disabled:F.value!==""},[...s[26]||(s[26]=[e("i",{class:"mdi mdi-delete"},null,-1)])],8,Ol)])],2))),128))])])):A("",!0),_.value.length>0?(a(),i("div",El,[e("h3",null,[s[27]||(s[27]=e("i",{class:"mdi mdi-alert"},null,-1)),C(" Untracked Commands ("+g(_.value.length)+") ",1)]),s[30]||(s[30]=e("p",{class:"untracked-info"}," These commands exist in Broadlink storage but are not tracked in this device. ",-1)),e("div",Vl,[(a(!0),i(de,null,ye(_.value,q=>(a(),i("div",{key:q,class:"command-item untracked"},[e("span",Pl,g(q),1),s[28]||(s[28]=e("span",{class:"untracked-badge"},"Not tracked",-1))]))),128))]),e("button",{type:"button",onClick:ce,class:"btn btn-secondary"},[...s[29]||(s[29]=[e("i",{class:"mdi mdi-import"},null,-1),C(" Import All Untracked Commands ",-1)])])])):A("",!0)]),e("div",Ul,[e("button",{type:"button",onClick:s[5]||(s[5]=q=>S.$emit("cancel")),class:"btn btn-secondary",disabled:x.value}," Close ",8,jl)])]),ie(De,{isOpen:D.value,title:"Delete Command?",message:`Delete command '${$.value}'? This will remove it from Broadlink storage.`,confirmText:"Delete",cancelText:"Cancel",dangerMode:!0,onConfirm:H,onCancel:m},null,8,["isOpen","message"]),ie(De,{isOpen:R.value,title:"Import Commands?",message:`Import ${_.value.length} untracked command${_.value.length>1?"s":""} into this device?`,confirmText:"Import",cancelText:"Cancel",onConfirm:me,onCancel:s[6]||(s[6]=q=>R.value=!1)},null,8,["isOpen","message"])]))}},Nl=be(Fl,[["__scopeId","data-v-0538bbe7"]]),Bl={class:"modal-container error-dialog"},Hl={class:"modal-header"},ql={class:"modal-body"},zl={class:"error-message"},Jl={key:0,class:"error-suggestion"},Wl=["open"],Gl={class:"debug-content"},Xl={class:"debug-info"},Kl={key:0,class:"debug-section-title"},Yl={key:1},Zl={__name:"ErrorDialog",props:{isOpen:{type:Boolean,default:!1},title:{type:String,default:"Error"},message:{type:String,required:!0},suggestion:{type:String,default:""},details:{type:String,default:""},error:{type:Object,default:null},context:{type:Object,default:()=>({})}},emits:["close"],setup(l,{emit:v}){const r=l,b=v,d=we("toast"),p=k(!1),w=()=>{b("close")},t=W(()=>{var _,D,$,R,j,P,c,F,X,te,Q;const y=new Date().toISOString(),o=r.error||{};return{error:JSON.stringify({message:r.message,title:r.title,details:r.details,errorObject:o.message||o.toString(),timestamp:y},null,2),request:JSON.stringify({method:((D=(_=o.config)==null?void 0:_.method)==null?void 0:D.toUpperCase())||"N/A",url:(($=o.config)==null?void 0:$.url)||"N/A",baseURL:((R=o.config)==null?void 0:R.baseURL)||"N/A",headers:((j=o.config)==null?void 0:j.headers)||{},data:(P=o.config)!=null&&P.data?JSON.parse(o.config.data):"N/A",params:((c=o.config)==null?void 0:c.params)||{}},null,2),response:JSON.stringify({status:((F=o.response)==null?void 0:F.status)||"N/A",statusText:((X=o.response)==null?void 0:X.statusText)||"N/A",data:((te=o.response)==null?void 0:te.data)||"N/A",headers:((Q=o.response)==null?void 0:Q.headers)||{}},null,2),browser:JSON.stringify({userAgent:navigator.userAgent,platform:navigator.platform,language:navigator.language,cookieEnabled:navigator.cookieEnabled,onLine:navigator.onLine,viewport:`${window.innerWidth}x${window.innerHeight}`,screenResolution:`${window.screen.width}x${window.screen.height}`,colorDepth:window.screen.colorDepth,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,timestamp:y},null,2),appState:JSON.stringify({currentRoute:window.location.pathname,currentURL:window.location.href,referrer:document.referrer||"N/A",context:r.context||{},localStorage:{smartir_simulate:localStorage.getItem("smartir_simulate_not_installed"),theme:localStorage.getItem("theme")}},null,2),stackTrace:o.stack||null}}),u=async()=>{const y=M();try{await navigator.clipboard.writeText(y),d==null||d.success("Debug information copied to clipboard","âœ… Copied")}catch(o){console.error("Failed to copy:",o),d==null||d.error("Failed to copy to clipboard","âŒ Copy Failed")}},x=()=>{const y=M(),o=new Blob([y],{type:"text/plain"}),_=URL.createObjectURL(o),D=document.createElement("a");D.href=_;const $=new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5);D.download=`broadlink-manager-error-${$}.txt`,document.body.appendChild(D),D.click(),document.body.removeChild(D),URL.revokeObjectURL(_),d==null||d.success("Debug report downloaded","âœ… Downloaded")},M=()=>`Broadlink Manager - Error Report
${"=".repeat(60)}

Generated: ${new Date().toISOString()}
Title: ${r.title}
Message: ${r.message}
${r.suggestion?`Suggestion: ${r.suggestion}
`:""}
${"=".repeat(60)}

ERROR DETAILS
${"-".repeat(60)}
${t.value.error}

REQUEST INFORMATION
${"-".repeat(60)}
${t.value.request}

RESPONSE INFORMATION
${"-".repeat(60)}
${t.value.response}

BROWSER INFORMATION
${"-".repeat(60)}
${t.value.browser}

APPLICATION STATE
${"-".repeat(60)}
${t.value.appState}

${t.value.stackTrace?`STACK TRACE
${"-".repeat(60)}
${t.value.stackTrace}

`:""}
${"=".repeat(60)}
End of Report
`;return re(()=>r.isOpen,y=>{if(y){const o=_=>{_.key==="Escape"&&w()};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)}}),(y,o)=>(a(),Te(ze,{to:"body"},[ie(He,{name:"modal"},{default:Pe(()=>[l.isOpen?(a(),i("div",{key:0,class:"modal-overlay",onClick:ae(w,["self"])},[e("div",Bl,[e("div",Hl,[o[2]||(o[2]=e("div",{class:"header-icon error-icon"},[e("i",{class:"mdi mdi-alert-circle"})],-1)),e("h3",null,g(l.title),1),e("button",{onClick:w,class:"close-button"},[...o[1]||(o[1]=[e("i",{class:"mdi mdi-close"},null,-1)])])]),e("div",ql,[e("p",zl,g(l.message),1),l.suggestion?(a(),i("p",Jl,[o[3]||(o[3]=e("i",{class:"mdi mdi-lightbulb-on"},null,-1)),C(" "+g(l.suggestion),1)])):A("",!0),e("details",{class:"debug-section",open:p.value},[e("summary",{onClick:o[0]||(o[0]=_=>p.value=!p.value)},[e("i",{class:Z(["mdi",p.value?"mdi-chevron-down":"mdi-chevron-right"])},null,2),o[4]||(o[4]=C(" Debug Information ",-1))]),e("div",Gl,[e("div",{class:"debug-actions"},[e("button",{onClick:u,class:"btn-debug btn-copy"},[...o[5]||(o[5]=[e("i",{class:"mdi mdi-content-copy"},null,-1),C(" Copy to Clipboard ",-1)])]),e("button",{onClick:x,class:"btn-debug btn-download"},[...o[6]||(o[6]=[e("i",{class:"mdi mdi-download"},null,-1),C(" Download Report ",-1)])])]),e("div",Xl,[o[7]||(o[7]=e("div",{class:"debug-section-title"},"Error Details",-1)),e("pre",null,g(t.value.error),1),o[8]||(o[8]=e("div",{class:"debug-section-title"},"Request Information",-1)),e("pre",null,g(t.value.request),1),o[9]||(o[9]=e("div",{class:"debug-section-title"},"Response Information",-1)),e("pre",null,g(t.value.response),1),o[10]||(o[10]=e("div",{class:"debug-section-title"},"Browser Information",-1)),e("pre",null,g(t.value.browser),1),o[11]||(o[11]=e("div",{class:"debug-section-title"},"Application State",-1)),e("pre",null,g(t.value.appState),1),t.value.stackTrace?(a(),i("div",Kl,"Stack Trace")):A("",!0),t.value.stackTrace?(a(),i("pre",Yl,g(t.value.stackTrace),1)):A("",!0)])])],8,Wl)]),e("div",{class:"modal-footer"},[e("button",{onClick:w,class:"btn btn-primary"}," OK ")])])])):A("",!0)]),_:1})]))}},Ql=be(Zl,[["__scopeId","data-v-23858149"]]),es={key:0,class:"discovery-banner"},ts={class:"banner-content"},os={class:"banner-text"},ls={class:"modal-dialog"},ss={class:"modal-header"},ns={class:"modal-body"},as={class:"device-list"},is={class:"device-info"},rs={class:"device-details"},ds={class:"command-count"},us={class:"device-actions"},cs=["onClick"],ms=["onClick"],vs={class:"modal-footer"},ps={class:"modal-dialog modal-dialog-small"},fs={class:"modal-header"},gs={class:"modal-body"},ys={class:"warning-message"},bs={class:"modal-footer"},hs=["disabled"],ks=["disabled"],ws={__name:"DeviceDiscovery",emits:["adopt"],setup(l,{expose:v,emit:r}){const b=Le(),d=r,p=k([]),w=k(!1),t=k(!1),u=k(null),x=k(!1),M=W(()=>p.value.length>0);Se(async()=>{await y()});const y=async()=>{try{const $=await le.get("/api/devices/discover");p.value=$.data.untracked_devices||[]}catch($){console.error("Error loading untracked devices:",$),p.value=[]}},o=$=>{w.value=!1,d("adopt",$)},_=$=>{u.value=$,t.value=!0},D=async()=>{if(u.value){x.value=!0;try{const $=await le.delete(`/api/devices/untracked/${encodeURIComponent(u.value.device_name)}`);if($.data.success)p.value=p.value.filter(R=>R.device_name!==u.value.device_name),t.value=!1,u.value=null,console.log("Device deleted successfully");else throw new Error($.data.error||"Failed to delete device")}catch($){console.error("Error deleting device:",$),b.error(`Failed to delete device: ${$.message}`)}finally{x.value=!1}}};return v({refresh:y}),($,R)=>{var j,P,c;return M.value?(a(),i("div",es,[e("div",ts,[R[9]||(R[9]=e("div",{class:"banner-icon"},[e("i",{class:"mdi mdi-radar"})],-1)),e("div",os,[R[7]||(R[7]=e("h3",null,"Untracked Devices Found",-1)),e("p",null,g(p.value.length)+" device"+g(p.value.length>1?"s":"")+" with learned commands found in Broadlink storage",1)]),e("button",{onClick:R[0]||(R[0]=F=>w.value=!0),class:"btn btn-primary"},[...R[8]||(R[8]=[e("i",{class:"mdi mdi-eye"},null,-1),C(" View Devices ",-1)])])]),w.value?(a(),i("div",{key:0,class:"modal-overlay",onClick:R[3]||(R[3]=ae(F=>w.value=!1,["self"]))},[e("div",ls,[e("div",ss,[R[11]||(R[11]=e("h2",null,"Discovered Devices",-1)),e("button",{onClick:R[1]||(R[1]=F=>w.value=!1),class:"close-btn"},[...R[10]||(R[10]=[e("i",{class:"mdi mdi-close"},null,-1)])])]),e("div",ns,[R[16]||(R[16]=e("p",{class:"info-text"}," These devices have learned commands in Broadlink storage but are not being tracked. Adopt them to manage their commands and generate Home Assistant entities. ",-1)),e("div",as,[(a(!0),i(de,null,ye(p.value,F=>(a(),i("div",{key:F.device_name,class:"discovered-device"},[e("div",is,[R[13]||(R[13]=e("div",{class:"device-icon"},[e("i",{class:"mdi mdi-devices"})],-1)),e("div",rs,[e("h4",null,g(F.device_name),1),e("span",ds,[R[12]||(R[12]=e("i",{class:"mdi mdi-remote"},null,-1)),C(" "+g(F.command_count)+" command"+g(F.command_count>1?"s":""),1)])])]),e("div",us,[e("button",{onClick:X=>o(F),class:"btn btn-primary"},[...R[14]||(R[14]=[e("i",{class:"mdi mdi-plus"},null,-1),C(" Adopt ",-1)])],8,cs),e("button",{onClick:X=>_(F),class:"btn btn-danger",title:"Delete all commands"},[...R[15]||(R[15]=[e("i",{class:"mdi mdi-delete"},null,-1)])],8,ms)])]))),128))])]),e("div",vs,[e("button",{onClick:R[2]||(R[2]=F=>w.value=!1),class:"btn btn-secondary"}," Close ")])])])):A("",!0),t.value?(a(),i("div",{key:1,class:"modal-overlay",onClick:R[6]||(R[6]=ae(F=>t.value=!1,["self"]))},[e("div",ps,[e("div",fs,[R[18]||(R[18]=e("h2",null,"Delete Untracked Device",-1)),e("button",{onClick:R[4]||(R[4]=F=>t.value=!1),class:"close-btn"},[...R[17]||(R[17]=[e("i",{class:"mdi mdi-close"},null,-1)])])]),e("div",gs,[e("div",ys,[R[20]||(R[20]=e("i",{class:"mdi mdi-alert"},null,-1)),e("div",null,[e("p",null,[e("strong",null,'Are you sure you want to delete "'+g((j=u.value)==null?void 0:j.device_name)+'"?',1)]),e("p",null,"This will permanently delete all "+g((P=u.value)==null?void 0:P.command_count)+" command"+g(((c=u.value)==null?void 0:c.command_count)>1?"s":"")+" from Broadlink storage.",1),R[19]||(R[19]=e("p",{class:"warning-text"},"This action cannot be undone.",-1))])])]),e("div",bs,[e("button",{onClick:R[5]||(R[5]=F=>t.value=!1),class:"btn btn-secondary",disabled:x.value}," Cancel ",8,hs),e("button",{onClick:D,class:"btn btn-danger",disabled:x.value},[e("i",{class:Z(["mdi",x.value?"mdi-loading mdi-spin":"mdi-delete"])},null,2),C(" "+g(x.value?"Deleting...":"Delete"),1)],8,ks)])])])):A("",!0)])):A("",!0)}}},$s=be(ws,[["__scopeId","data-v-24463050"]]),Cs={class:"device-list-card"},Ss={class:"card-header"},_s={class:"header-badges"},Is={class:"header-info"},xs={class:"header-right"},Ds=["disabled"],Ts=["disabled"],Rs={class:"card-body"},As={key:0,class:"filter-bar"},Ls={class:"filter-row filter-row-search"},Ms={class:"filter-group filter-search"},Os={class:"filter-row filter-row-dropdowns"},Es={class:"filter-group"},Vs=["value"],Ps={class:"filter-group"},Us=["value"],js={class:"filter-group"},Fs={key:0,class:"filter-group filter-toggle"},Ns={class:"toggle-label"},Bs={class:"filter-results"},Hs={key:1,class:"loading-state"},qs={key:2,class:"error-state"},zs={key:3,class:"empty-state"},Js={key:4,class:"device-grid"},Ws={key:5,class:"no-results"},Gs={__name:"DeviceList",setup(l){const v=tt(),r=Le(),b=k(!1),d=k(!1),p=k(null),w=k(!1),t=k(null),u=k(null),x=k(!0),M=k(!1),y=k(!1),o=()=>{x.value=!x.value},_=k(!1),D=k({title:"Error",message:"",suggestion:"",details:"",error:null,context:{}}),$=k(!1),R=k({success:!1,title:"",message:""}),j=k({search:"",broadlinkDevice:"",area:"",entityType:"",showSmartIROnly:!1}),P=k([]),c=we("smartirStatus"),F=we("smartirEnabled"),X=W(()=>{var f;return localStorage.getItem("smartir_simulate_not_installed")==="true"?!1:((f=c==null?void 0:c.value)==null?void 0:f.installed)||!1}),te=W(()=>{const T=new Map;return v.devices.forEach(f=>{if(f.broadlink_entity){const E=P.value.find(z=>z.entity_id===f.broadlink_entity),N=E&&E.name||f.broadlink_entity;T.set(f.broadlink_entity,{entity_id:f.broadlink_entity,friendly_name:N})}}),Array.from(T.values()).sort((f,E)=>f.friendly_name.localeCompare(E.friendly_name))}),Q=W(()=>{const T=new Set;return v.devices.forEach(f=>{f.area&&T.add(f.area)}),Array.from(T).sort()}),ge=W(()=>{let T=v.devices;if(j.value.search){const E=j.value.search.toLowerCase();T=T.filter(N=>{var K,Y,fe,xe,Me;if((K=N.name)!=null&&K.toLowerCase().includes(E)||(Y=N.entity_type)!=null&&Y.toLowerCase().includes(E)||(fe=N.area)!=null&&fe.toLowerCase().includes(E)||(xe=N.id)!=null&&xe.toLowerCase().includes(E)||Object.keys(N.commands||{}).some(Ve=>Ve.toLowerCase().includes(E)))return!0;const ee=P.value.find(Ve=>Ve.entity_id===N.broadlink_entity);return!!((Me=ee==null?void 0:ee.name)!=null&&Me.toLowerCase().includes(E))})}j.value.broadlinkDevice&&(T=T.filter(E=>E.broadlink_entity===j.value.broadlinkDevice||E.controller_device===j.value.broadlinkDevice)),j.value.area&&(T=T.filter(E=>E.area===j.value.area)),j.value.entityType&&(T=T.filter(E=>E.entity_type===j.value.entityType)),j.value.showSmartIROnly&&(T=T.filter(E=>E.device_type==="smartir"));const f=localStorage.getItem("smartir_simulate_not_installed")==="true";return(!(F!=null&&F.value)||f)&&(T=T.filter(E=>E.device_type!=="smartir")),T}),I=W(()=>j.value.search||j.value.broadlinkDevice||j.value.area||j.value.entityType||j.value.showSmartIROnly),V=()=>{j.value.search="",j.value.broadlinkDevice="",j.value.area="",j.value.entityType="",j.value.showSmartIROnly=!1},G=async()=>{try{const T=await le.get("/api/remote/devices");P.value=T.data.devices||[]}catch(T){console.error("Error loading remote devices:",T)}};Se(async()=>{await Promise.all([v.loadDevices(),G()])});const se=T=>{p.value=T,b.value=!0},he=W(()=>{if(!t.value)return"";const T=Object.keys(t.value.commands||{}).length;return T===0?"This device has no commands. The device will be removed from tracking.":`This device has ${T} learned command${T>1?"s":""}. What would you like to do?`}),B=W(()=>{if(!t.value)return"";const T=Object.keys(t.value.commands||{}).length;return T===0?"":`Also delete all ${T} command${T>1?"s":""} from Broadlink storage`}),h=T=>{t.value=T,w.value=!0},m=()=>{w.value=!1,t.value=null},H=async T=>{var E,N;const f=t.value;w.value=!1;try{await v.deleteDevice(f.id,T),u.value&&await u.value.refresh()}catch(z){const ee=((N=(E=z.response)==null?void 0:E.data)==null?void 0:N.error)||z.message||"Unknown error";s("Failed to Delete Device",ee)}finally{t.value=null}},ue=async T=>{var f,E,N,z,ee;try{console.log("ğŸ’¾ Saving device data:",T),console.log("ğŸ’¾ Device commands:",T.commands),console.log("ğŸ’¾ Selected device:",p.value),(f=p.value)!=null&&f.id&&p.value.id!==null?await v.updateDevice(p.value.id,T):await v.createDevice(T),ce(),u.value&&await u.value.refresh()}catch(K){let Y="Failed to save device",fe="",xe="";(N=(E=K.response)==null?void 0:E.data)!=null&&N.error?(Y=K.response.data.error,fe=K.response.data.suggestion||""):K.message&&(Y=K.message),K.response&&(xe=`Status: ${K.response.status}
URL: ${((z=K.config)==null?void 0:z.url)||"N/A"}`),s("Failed to Save Device",Y,fe,xe,K,{action:"save_device",deviceData:T,isEdit:!!((ee=p.value)!=null&&ee.id)})}},ce=()=>{b.value=!1,p.value=null},me=T=>{p.value=T,d.value=!0},S=()=>{d.value=!1,p.value=null},s=(T,f,E="",N="",z=null,ee={})=>{D.value={title:T,message:f,suggestion:E,details:N,error:z,context:ee},_.value=!0},q=()=>{_.value=!1},ne=()=>{$.value=!1},ve=async T=>{if(T&&T.commands&&p.value){const f=v.devices.findIndex(E=>E.id===p.value.id);f!==-1&&(v.devices[f].commands=T.commands,console.log(`Optimistically updated device ${p.value.id} with new command: ${T.commandName}`))}v.loadDevices(),u.value&&u.value.refresh()},pe=T=>{const f=T.split("_"),E=[];for(let N=0;N<f.length;N++){const z=f[N],ee=f[N+1];z&&ee==="s"&&f[N+2]?(E.push(z.charAt(0).toUpperCase()+z.slice(1)+"'s"),N++):z!=="s"&&E.push(z.charAt(0).toUpperCase()+z.slice(1))}return E.join(" ")},ke=(T,f)=>{const E=T.toLowerCase(),N=f.map(Y=>Y.toLowerCase());return E.includes("lamp")||E.includes("light")?"light":E.includes("fan")?"fan":E.includes("tv")||E.includes("stereo")||E.includes("speaker")||E.includes("receiver")?"media_player":E.includes("blind")||E.includes("curtain")||E.includes("shade")||E.includes("garage")?"cover":N.some(Y=>Y.includes("volume")||Y.includes("channel")||Y.includes("play")||Y.includes("pause")||Y.includes("mute"))?"media_player":N.some(Y=>Y.includes("fan_speed")||Y.includes("fan_low")||Y.includes("fan_high"))?"fan":N.some(Y=>Y.includes("open")||Y.includes("close")||Y.includes("stop"))?"cover":"switch"},Ie=(T,f)=>{const E=T.toLowerCase();return E.includes("tv")?"mdi:television":E.includes("stereo")||E.includes("receiver")||E.includes("speaker")?"mdi:speaker":E.includes("lamp")?"mdi:lamp":E.includes("light")?"mdi:lightbulb":E.includes("fan")?"mdi:fan":E.includes("blind")?"mdi:blinds":E.includes("curtain")?"mdi:curtains":E.includes("garage")?"mdi:garage":{light:"mdi:lightbulb",fan:"mdi:fan",switch:"mdi:light-switch",media_player:"mdi:speaker",cover:"mdi:window-shutter"}[f]||"mdi:devices"},L=T=>{const f=T.toLowerCase().split("_");for(let z=0;z<f.length-2;z++)if(f[z+1]==="s"){const ee=f.slice(z,z+3),K=pe(ee.join("_"));return console.log("Detected possessive area:",K,"from",T),K}const E=[["living","room"],["dining","room"],["master","bedroom"],["guest","bedroom"],["family","room"],["laundry","room"],["home","office"]];for(let z=0;z<f.length-1;z++){const ee=[f[z],f[z+1]],K=E.find(Y=>Y[0]===ee[0]&&Y[1]===ee[1]);if(K)return pe(K.join("_"))}const N=["kitchen","bedroom","bathroom","garage","office","basement","attic","hallway","entryway","patio","deck","yard","garden"];for(const z of f)if(N.includes(z))return z.charAt(0).toUpperCase()+z.slice(1);return""},n=async T=>{const f=pe(T.device_name),E=L(T.device_name),N=ke(T.device_name,T.commands),z=Ie(T.device_name,N);let ee="";try{console.log("Finding Broadlink owner for:",T.device_name);const Y=await le.post("/api/devices/find-broadlink-owner",{device_name:T.device_name});console.log("Broadlink owner response:",Y.data),ee=Y.data.broadlink_entity||"",console.log("Detected Broadlink entity:",ee)}catch(Y){console.error("Error finding Broadlink owner:",Y)}p.value={id:null,device:T.device_name,name:f,entity_type:N,commands:{},area:E,icon:z,broadlink_entity:ee,enabled:!0};const K={};T.commands.forEach(Y=>{K[Y]=Y}),p.value.commands=K,b.value=!0},U=async()=>{y.value=!0;try{await v.syncAllAreas(),r.success("Areas synced from Home Assistant")}catch(T){console.error("Error syncing areas:",T),r.error("Failed to sync areas")}finally{y.value=!1}},O=async()=>{var T,f;M.value=!0;try{const E=await le.post("/api/entities/generate",{});if(E.data.success){const N=E.data.broadlink_count||0,z=E.data.smartir_count||0,ee=E.data.total_count||0,K=E.data.errors||[];let Y="âœ… Entity Generation Successful",fe=[];const xe=[];N>0&&xe.push(`${N} Broadlink native`),z>0&&xe.push(`${z} SmartIR`),xe.length>0&&fe.push(`Generated ${xe.join(" and ")} entity configuration${ee!==1?"s":""}.`),N>0&&(fe.push(`
ğŸ“ Broadlink entities created in:`),fe.push("  â€¢ broadlink_manager/entities.yaml"),fe.push("  â€¢ broadlink_manager/helpers.yaml")),z>0&&(fe.push(`
ğŸ“ SmartIR entities created in:`),fe.push("  â€¢ smartir/climate.yaml"),fe.push("  â€¢ smartir/media_player.yaml"),fe.push("  â€¢ smartir/fan.yaml")),fe.push(`
ğŸ“ Next steps:`),fe.push("1. Check your configuration.yaml includes the generated files"),fe.push("2. Restart Home Assistant to load the new entities"),K.length>0&&(Y="âš ï¸ Entity Generation Completed with Errors",fe.push(`
âš ï¸ ${K.length} error${K.length!==1?"s":""} occurred:`),K.forEach(Me=>{fe.push(`  â€¢ ${Me}`)})),R.value={success:!0,title:Y,message:fe.join(`
`)},$.value=!0}else R.value={success:!1,title:"âŒ Entity Generation Failed",message:E.data.message||`Failed to generate entities.

Please check that you have at least one device configured.`},$.value=!0}catch(E){console.error("Error generating entities:",E);const N=((f=(T=E.response)==null?void 0:T.data)==null?void 0:f.error)||E.message||"Unknown error occurred";R.value={success:!1,title:"âŒ Entity Generation Error",message:`Failed to generate entities:

${N}

Please check the logs for more details.`},$.value=!0}finally{M.value=!1}};return(T,f)=>{var E;return a(),i("div",Cs,[e("div",Ss,[e("button",{class:"icon-button chevron-button",onClick:o},[e("i",{class:Z(["mdi",x.value?"mdi-chevron-up":"mdi-chevron-down"])},null,2)]),e("div",{class:"header-left",onClick:o},[f[8]||(f[8]=e("div",{class:"header-icon"},[e("i",{class:"mdi mdi-devices"})],-1)),f[9]||(f[9]=e("h3",null,"Managed Devices",-1)),e("div",_s,[e("span",Is,g(_e(v).deviceCount)+" devices",1)])]),e("div",xs,[x.value?(a(),i("button",{key:0,onClick:ae(U,["stop"]),class:"btn btn-secondary",disabled:y.value,title:"Sync all areas from Home Assistant"},[e("i",{class:Z(["mdi",y.value?"mdi-loading mdi-spin":"mdi-refresh"])},null,2),C(" "+g(y.value?"Syncing...":"Sync Areas"),1)],8,Ds)):A("",!0),x.value?(a(),i("button",{key:1,onClick:ae(O,["stop"]),class:"btn btn-secondary",disabled:M.value},[e("i",{class:Z(["mdi",M.value?"mdi-loading mdi-spin":"mdi-file-code"])},null,2),C(" "+g(M.value?"Generating...":"Generate Entities"),1)],8,Ts)):A("",!0),x.value?(a(),i("button",{key:2,onClick:f[0]||(f[0]=ae(N=>b.value=!0,["stop"])),class:"btn btn-primary"},[...f[10]||(f[10]=[e("i",{class:"mdi mdi-plus"},null,-1),C(" Add Device ",-1)])])):A("",!0)])]),J(e("div",Rs,[ie($s,{ref_key:"discoveryRef",ref:u,onAdopt:n},null,512),_e(v).hasDevices?(a(),i("div",As,[e("div",Ls,[e("div",Ms,[e("label",null,[f[11]||(f[11]=e("i",{class:"mdi mdi-magnify"},null,-1)),J(e("input",{"onUpdate:modelValue":f[1]||(f[1]=N=>j.value.search=N),type:"text",placeholder:"Search devices, commands...",class:"search-input"},null,512),[[$e,j.value.search]])])])]),e("div",Os,[e("div",Es,[e("label",null,[f[13]||(f[13]=e("i",{class:"mdi mdi-access-point"},null,-1)),J(e("select",{"onUpdate:modelValue":f[2]||(f[2]=N=>j.value.broadlinkDevice=N)},[f[12]||(f[12]=e("option",{value:""},"All Controller Devices",-1)),(a(!0),i(de,null,ye(te.value,N=>(a(),i("option",{key:N.entity_id,value:N.entity_id},g(N.friendly_name),9,Vs))),128))],512),[[Ce,j.value.broadlinkDevice]])])]),e("div",Ps,[e("label",null,[f[15]||(f[15]=e("i",{class:"mdi mdi-home-map-marker"},null,-1)),J(e("select",{"onUpdate:modelValue":f[3]||(f[3]=N=>j.value.area=N)},[f[14]||(f[14]=e("option",{value:""},"All Areas",-1)),(a(!0),i(de,null,ye(Q.value,N=>(a(),i("option",{key:N,value:N},g(N),9,Us))),128))],512),[[Ce,j.value.area]])])]),e("div",js,[e("label",null,[f[17]||(f[17]=e("i",{class:"mdi mdi-shape"},null,-1)),J(e("select",{"onUpdate:modelValue":f[4]||(f[4]=N=>j.value.entityType=N)},[...f[16]||(f[16]=[Re('<option value="" data-v-9e2ead7d>All Types</option><option value="light" data-v-9e2ead7d>Light</option><option value="fan" data-v-9e2ead7d>Fan</option><option value="switch" data-v-9e2ead7d>Switch</option><option value="media_player" data-v-9e2ead7d>Media Player</option><option value="cover" data-v-9e2ead7d>Cover</option><option value="climate" data-v-9e2ead7d>Climate</option>',7)])],512),[[Ce,j.value.entityType]])])]),X.value?(a(),i("div",Fs,[e("label",Ns,[f[18]||(f[18]=e("span",{class:"toggle-text"},[e("img",{src:Ue,alt:"SmartIR",class:"smartir-icon"}),C(" SmartIR Only ")],-1)),J(e("input",{type:"checkbox","onUpdate:modelValue":f[5]||(f[5]=N=>j.value.showSmartIROnly=N),class:"toggle-checkbox"},null,512),[[oe,j.value.showSmartIROnly]]),f[19]||(f[19]=e("span",{class:"toggle-slider"},null,-1))])])):A("",!0),I.value?(a(),i("button",{key:1,onClick:V,class:"btn-clear-filters"},[...f[20]||(f[20]=[e("i",{class:"mdi mdi-filter-remove"},null,-1),C(" Clear ",-1)])])):A("",!0),e("div",Bs,g(ge.value.length)+" of "+g(_e(v).deviceCount),1)])])):A("",!0),_e(v).loading?(a(),i("div",Hs,[...f[21]||(f[21]=[e("i",{class:"mdi mdi-loading mdi-spin"},null,-1),e("p",null,"Loading devices...",-1)])])):_e(v).error?(a(),i("div",qs,[f[22]||(f[22]=e("i",{class:"mdi mdi-alert-circle"},null,-1)),e("p",null,g(_e(v).error),1),e("button",{onClick:f[6]||(f[6]=N=>_e(v).loadDevices()),class:"btn btn-secondary"}," Retry ")])):_e(v).hasDevices?(a(),i("div",Js,[(a(!0),i(de,null,ye(ge.value,N=>(a(),Te(St,{key:N.id,device:N,"broadlink-devices":P.value,onEdit:se,onDelete:h,onLearn:me},null,8,["device","broadlink-devices"]))),128))])):(a(),i("div",zs,[f[24]||(f[24]=e("i",{class:"mdi mdi-devices"},null,-1)),f[25]||(f[25]=e("h3",null,"No Devices Yet",-1)),f[26]||(f[26]=e("p",null,"Get started by adding your first managed device",-1)),e("button",{onClick:f[7]||(f[7]=N=>b.value=!0),class:"btn btn-primary"},[...f[23]||(f[23]=[e("i",{class:"mdi mdi-plus"},null,-1),C(" Add Your First Device ",-1)])])])),_e(v).hasDevices&&ge.value.length===0?(a(),i("div",Ws,[...f[27]||(f[27]=[e("i",{class:"mdi mdi-filter-off"},null,-1),e("h3",null,"No devices match your filters",-1),e("p",null,"Try adjusting your search or filter criteria",-1)])])):A("",!0)],512),[[Je,x.value]]),b.value?(a(),Te(Ko,{key:0,device:p.value,onSave:ue,onCancel:ce},null,8,["device"])):A("",!0),d.value?(a(),Te(Nl,{key:1,device:p.value,onLearned:ve,onCancel:S},null,8,["device"])):A("",!0),ie(De,{isOpen:w.value,title:`Delete ${(E=t.value)==null?void 0:E.name}?`,message:he.value,confirmText:"Delete",cancelText:"Cancel",dangerMode:!0,checkboxLabel:B.value,onConfirm:H,onCancel:m},null,8,["isOpen","title","message","checkboxLabel"]),ie(Ql,{isOpen:_.value,title:D.value.title,message:D.value.message,suggestion:D.value.suggestion,details:D.value.details,error:D.value.error,context:D.value.context,onClose:q},null,8,["isOpen","title","message","suggestion","details","error","context"]),ie(De,{isOpen:$.value,title:R.value.title,message:R.value.message,confirmText:"OK",showCancel:!1,dangerMode:!R.value.success,onConfirm:ne,onCancel:ne},null,8,["isOpen","title","message","dangerMode"])])}}},Xs=be(Gs,[["__scopeId","data-v-9e2ead7d"]]),Ks={class:"banner-content"},Ys={class:"banner-icon"},Zs={class:"banner-message"},Qs={class:"banner-actions"},en={__name:"SmartIRBanner",setup(l){const v=we("smartirStatus"),r=k(!1),b=W(()=>!(!v.value||r.value||localStorage.getItem("smartir_banner_dismissed")==="true")),d=W(()=>{var M;return(M=v.value)!=null&&M.installed?"banner-success":"banner-info"}),p=W(()=>{var M;return(M=v.value)!=null&&M.installed?"mdi mdi-check-circle":"mdi mdi-information"}),w=W(()=>{var M;return(M=v.value)!=null&&M.installed?`SmartIR Detected (v${v.value.version})`:"Want Climate Device Support?"}),t=W(()=>{var M;return(M=v.value)!=null&&M.installed?"You can now create climate device profiles with full temperature and HVAC mode control.":"Install SmartIR to unlock AC/heater control with temperature settings, HVAC modes, and 120+ pre-configured device profiles."});function u(){window.open("https://github.com/smartHomeHub/SmartIR","_blank")}function x(){var M;if(r.value=!0,(M=v.value)!=null&&M.installed)localStorage.setItem("smartir_banner_dismissed","true");else{const y=parseInt(localStorage.getItem("smartir_banner_dismiss_count")||"0");y>=2?localStorage.setItem("smartir_banner_dismissed","true"):localStorage.setItem("smartir_banner_dismiss_count",String(y+1))}}return Se(()=>{var o;const M=localStorage.getItem("smartir_last_status"),y=(o=v.value)!=null&&o.installed?"installed":"not_installed";M!==y&&(localStorage.removeItem("smartir_banner_dismissed"),localStorage.removeItem("smartir_banner_dismiss_count"),localStorage.setItem("smartir_last_status",y))}),(M,y)=>{var o,_;return b.value?(a(),i("div",{key:0,class:Z(["smartir-banner",d.value])},[e("div",Ks,[e("div",Ys,[e("i",{class:Z(p.value)},null,2)]),e("div",Zs,[e("strong",null,g(w.value),1),e("p",null,g(t.value),1)]),e("div",Qs,[(o=M.status)!=null&&o.installed?A("",!0):(a(),i("button",{key:0,onClick:u,class:"btn-primary"}," Learn More ")),e("button",{onClick:x,class:"btn-text"},g((_=M.status)!=null&&_.installed?"Got it":"Dismiss"),1)])])],2)):A("",!0)}}},tn=be(en,[["__scopeId","data-v-7bbcbcd7"]]),Ae="api/smartir",We={async getStatus(){try{const l=await fetch(`${Ae}/status`);if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);return await l.json()}catch(l){return console.error("Error fetching SmartIR status:",l),{installed:!1,version:null,error:l.message}}},async getInstallInstructions(){try{const l=await fetch(`${Ae}/install-instructions`);if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);return await l.json()}catch(l){throw console.error("Error fetching install instructions:",l),l}},async getPlatforms(){try{const l=await fetch(`${Ae}/platforms`);if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);return await l.json()}catch(l){throw console.error("Error fetching platforms:",l),l}},async getPlatformCodes(l){try{const v=await fetch(`${Ae}/platforms/${l}/codes`);if(!v.ok)throw new Error(`HTTP error! status: ${v.status}`);return await v.json()}catch(v){throw console.error(`Error fetching codes for ${l}:`,v),v}},async getNextCode(l){try{const v=await fetch(`${Ae}/platforms/${l}/next-code`);if(!v.ok)throw new Error(`HTTP error! status: ${v.status}`);return await v.json()}catch(v){throw console.error(`Error fetching next code for ${l}:`,v),v}},async validateCode(l,v){try{const r=await fetch(`${Ae}/validate-code`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({platform:l,code:v})});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(r){throw console.error("Error validating code:",r),r}}},on={class:"smartir-status-card"},ln={class:"card-header"},sn=["src"],nn={class:"header-badges"},an=["title"],rn={class:"header-info"},dn={class:"header-info"},un={class:"header-info"},cn={class:"header-right"},mn={key:0,class:"card-body loading-state"},vn={key:1,class:"card-body error-state"},pn={key:2,class:"card-body installed-state"},fn={key:0,class:"help-panel"},gn={key:0,class:"recommendation"},yn={key:0,class:"next-steps"},bn={key:1,class:"filter-bar"},hn={class:"filter-row"},kn={class:"filter-group filter-search"},wn={class:"filter-group"},$n={class:"filter-results"},Cn={key:2,class:"loading-state"},Sn={key:3,class:"empty-state"},_n={key:4,class:"profiles-grid"},In={class:"profile-card-header"},xn={class:"profile-icon"},Dn={class:"profile-details"},Tn={class:"profile-meta"},Rn={class:"platform-badge"},An={class:"code-badge"},Ln={key:0,class:"controller-badge"},Mn={key:0,class:"learned-indicator"},On={class:"profile-card-actions"},En=["onClick"],Vn=["onClick"],Pn=["onClick"],Un={key:5,class:"no-results"},jn={key:3,class:"card-body not-installed-state"},Fn={class:"benefits-section"},Nn={class:"benefits-list"},Bn={class:"recommendation"},Hn={__name:"SmartIRStatusCard",emits:["create-profile","show-install-guide","edit-profile"],setup(l,{expose:v,emit:r}){const b=r,d=we("smartirStatus");we("smartirEnabled");const p=we("refreshSmartIR"),w=k(!1),t=k(null),u=k((d==null?void 0:d.value)||null),x=k(localStorage.getItem("smartir_simulate_not_installed")==="true"),M=k(!1),y=k(!0),o=k([]),_=k(!1),D=k({search:"",platform:""}),$=k({show:!1,title:"",message:"",platform:null,profile:null}),R=["Full climate entity support (AC, heaters)","120+ pre-configured device profiles","Temperature and humidity sensor integration","HVAC mode control (heat, cool, auto, dry, fan)"],j=["climate","media_player","fan","light"],P=W(()=>x.value?{installed:!1,recommendation:{message:"Install SmartIR to unlock climate device support!",benefits:["Full climate entity support (AC, heaters)","120+ pre-configured device profiles","Temperature and humidity sensor integration","HVAC mode control (heat, cool, auto, dry, fan)"]}}:u.value),c=W(()=>{var S,s;return((s=(S=P.value)==null?void 0:S.platforms)==null?void 0:s.length)||0}),F=W(()=>{var S;return(S=P.value)!=null&&S.device_counts?Object.values(P.value.device_counts).reduce((s,q)=>s+q,0):0});function X(){var S;x.value=!x.value,localStorage.setItem("smartir_simulate_not_installed",x.value.toString()),!x.value&&((S=u.value)!=null&&S.installed)&&m()}const te=W(()=>{let S=o.value;if(D.value.search){const s=D.value.search.toLowerCase();S=S.filter(q=>{var ne,ve,pe,ke;return((ne=q.manufacturer)==null?void 0:ne.toLowerCase().includes(s))||((ve=q.model)==null?void 0:ve.toLowerCase().includes(s))||((pe=q.code)==null?void 0:pe.toString().includes(s))||((ke=q.platform)==null?void 0:ke.toLowerCase().includes(s))})}return D.value.platform&&(S=S.filter(s=>s.platform===D.value.platform)),S}),Q=W(()=>D.value.search||D.value.platform);function ge(){D.value.search="",D.value.platform=""}function I(S){return{climate:"mdi mdi-air-conditioner",media_player:"mdi mdi-television",fan:"mdi mdi-fan",light:"mdi mdi-lightbulb"}[S]||"mdi mdi-devices"}function V(S){return S.split("_").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" ")}async function G(){w.value=!0,t.value=null;try{if(p)await p();else{const S=await We.getStatus();u.value=S}}catch(S){t.value=S.message||"Failed to refresh SmartIR status",console.error("Error refreshing SmartIR status:",S)}finally{w.value=!1}}function se(){b("create-profile")}function he(){b("show-install-guide")}function B(){window.open("https://github.com/smartHomeHub/SmartIR","_blank")}function h(){window.open("https://github.com/smartHomeHub/SmartIR","_blank")}async function m(){_.value=!0;const S=[];try{for(const s of j)try{const q=await fetch(`api/smartir/platforms/${s}/profiles`);if(q.ok){const ve=((await q.json()).profiles||[]).map(pe=>({...pe,platform:s}));S.push(...ve)}}catch(q){console.error(`Error loading ${s} profiles:`,q)}o.value=S}finally{_.value=!1}}function H(S,s){b("edit-profile",{platform:S,profile:s})}async function ue(S,s){var q,ne;try{const ve=await fetch(`api/smartir/platforms/${S}/profiles/${s.code}`);if(!ve.ok)throw new Error("Failed to fetch profile");const pe=await ve.json(),ke=JSON.stringify(pe.profile,null,2),Ie=new Blob([ke],{type:"application/json"}),L=URL.createObjectURL(Ie),n=document.createElement("a");n.href=L,n.download=`smartir_${S}_${s.manufacturer}_${s.model}_${s.code}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(L),(q=we("toast").value)==null||q.success(`Downloaded ${s.manufacturer} ${s.model}`,"âœ… Profile Downloaded")}catch(ve){console.error("Error downloading profile:",ve),(ne=we("toast").value)==null||ne.error("Failed to download profile","âŒ Download Error")}}function ce(S,s){$.value={show:!0,title:`Delete ${s.manufacturer} ${s.model}?`,message:`Device Code: ${s.code}

This will remove the profile and update your configuration.`,platform:S,profile:s}}async function me(){var ne,ve,pe;const S=we("toast"),{platform:s,profile:q}=$.value;$.value.show=!1;try{const ke=await fetch(`api/smartir/profiles/${q.code}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({platform:s})});if(ke.ok)await m(),await qe(),await G(),(ne=S.value)==null||ne.success(`${q.manufacturer} ${q.model} has been removed`,"âœ… Profile Deleted");else{const Ie=await ke.json();(ve=S.value)==null||ve.error(Ie.error||"Unknown error","âŒ Delete Failed")}}catch(ke){console.error("Error deleting profile:",ke),(pe=S.value)==null||pe.error("Failed to delete profile","âŒ Delete Error")}}return re(d,S=>{S&&(u.value=S)},{immediate:!0}),Se(async()=>{var S;d!=null&&d.value&&(u.value=d.value),u.value||await G(),(S=u.value)!=null&&S.installed&&await m()}),v({loadAllProfiles:m,refreshStatus:G}),(S,s)=>{var q,ne,ve,pe,ke,Ie,L,n,U;return a(),i("div",on,[e("div",ln,[e("button",{class:"icon-button chevron-button",onClick:s[0]||(s[0]=O=>y.value=!y.value)},[e("i",{class:Z(["mdi",y.value?"mdi-chevron-up":"mdi-chevron-down"])},null,2)]),e("div",{class:"header-left",onClick:s[1]||(s[1]=O=>y.value=!y.value)},[e("img",{src:_e(Ue),alt:"SmartIR",class:"smartir-logo"},null,8,sn),s[7]||(s[7]=e("h3",null,"SmartIR Integration",-1)),e("div",nn,[e("div",{class:Z(["simulation-toggle-pill",{active:x.value}]),onClick:ae(X,["stop"]),title:x.value?"Click to show as installed":"Click to simulate not-installed"},[e("i",{class:Z(["mdi",x.value?"mdi-eye-off":"mdi-eye"])},null,2),e("span",null,g(x.value?"Simulating: Not Installed":"Simulation Mode"),1)],10,an),(q=P.value)!=null&&q.installed?(a(),i(de,{key:0},[s[6]||(s[6]=e("div",{class:"status-badge-mini success"},[e("i",{class:"mdi mdi-check-circle"}),e("span",null,"Installed")],-1)),e("span",rn,"v"+g(P.value.version||"Unknown"),1),e("span",dn,g(c.value)+" platform"+g(c.value!==1?"s":""),1),e("span",un,g(F.value)+" device"+g(F.value!==1?"s":""),1)],64)):A("",!0)])]),e("div",cn,[(ne=u.value)!=null&&ne.installed&&y.value?(a(),i("button",{key:0,onClick:s[2]||(s[2]=ae(O=>M.value=!M.value,["stop"])),class:Z(["icon-button",{active:M.value}]),title:"Show help"},[...s[8]||(s[8]=[e("i",{class:"mdi mdi-help-circle"},null,-1)])],2)):A("",!0),(ve=u.value)!=null&&ve.installed&&y.value?(a(),i("button",{key:1,onClick:ae(G,["stop"]),class:"icon-button",title:"Refresh status"},[...s[9]||(s[9]=[e("i",{class:"mdi mdi-refresh"},null,-1)])])):A("",!0),(pe=u.value)!=null&&pe.installed&&y.value?(a(),i("button",{key:2,onClick:ae(se,["stop"]),class:"btn btn-primary"},[...s[10]||(s[10]=[e("i",{class:"mdi mdi-plus"},null,-1),C(" Create SmartIR Profile ",-1)])])):A("",!0)])]),J(e("div",null,[w.value?(a(),i("div",mn,[...s[11]||(s[11]=[e("div",{class:"spinner"},null,-1),e("p",null,"Checking SmartIR installation...",-1)])])):t.value?(a(),i("div",vn,[s[12]||(s[12]=e("i",{class:"mdi mdi-alert-circle"},null,-1)),e("p",null,g(t.value),1),e("button",{onClick:G,class:"btn-secondary"}," Try Again ")])):(ke=P.value)!=null&&ke.installed?(a(),i("div",pn,[M.value?(a(),i("div",fn,[u.value.recommendation?(a(),i("div",gn,[e("p",null,g(u.value.recommendation.message),1),u.value.recommendation.next_steps?(a(),i("div",yn,[s[13]||(s[13]=e("strong",null,"Next Steps:",-1)),e("ul",null,[(a(!0),i(de,null,ye(u.value.recommendation.next_steps,(O,T)=>(a(),i("li",{key:T},g(O),1))),128))])])):A("",!0)])):A("",!0),e("div",{class:"help-actions"},[e("button",{onClick:B,class:"btn-secondary"},[...s[14]||(s[14]=[e("i",{class:"mdi mdi-book-open-variant"},null,-1),C(" View Documentation ",-1)])])])])):A("",!0),o.value.length>0&&!x.value?(a(),i("div",bn,[e("div",hn,[e("div",kn,[e("label",null,[s[15]||(s[15]=e("i",{class:"mdi mdi-magnify"},null,-1)),J(e("input",{"onUpdate:modelValue":s[3]||(s[3]=O=>D.value.search=O),type:"text",placeholder:"Search profiles...",class:"search-input"},null,512),[[$e,D.value.search]])])]),e("div",wn,[e("label",null,[s[17]||(s[17]=e("i",{class:"mdi mdi-shape"},null,-1)),J(e("select",{"onUpdate:modelValue":s[4]||(s[4]=O=>D.value.platform=O)},[...s[16]||(s[16]=[Re('<option value="" data-v-88cdf67f>All Platforms</option><option value="climate" data-v-88cdf67f>Climate</option><option value="media_player" data-v-88cdf67f>Media Player</option><option value="fan" data-v-88cdf67f>Fan</option><option value="light" data-v-88cdf67f>Light</option>',5)])],512),[[Ce,D.value.platform]])])]),Q.value?(a(),i("button",{key:0,onClick:ge,class:"btn-clear-filters"},[...s[18]||(s[18]=[e("i",{class:"mdi mdi-filter-remove"},null,-1),C(" Clear ",-1)])])):A("",!0),e("div",$n,g(te.value.length)+" of "+g(o.value.length),1)])])):A("",!0),_.value?(a(),i("div",Cn,[...s[19]||(s[19]=[e("i",{class:"mdi mdi-loading mdi-spin"},null,-1),e("p",null,"Loading profiles...",-1)])])):o.value.length===0?(a(),i("div",Sn,[...s[20]||(s[20]=[e("i",{class:"mdi mdi-file-document-outline"},null,-1),e("h3",null,"No Profiles Yet",-1),e("p",null,"Create your first SmartIR profile to get started",-1)])])):x.value?A("",!0):(a(),i("div",_n,[(a(!0),i(de,null,ye(te.value,O=>(a(),i("div",{key:`${O.platform}-${O.code}`,class:"profile-card"},[e("div",In,[e("div",xn,[e("i",{class:Z(I(O.platform))},null,2)]),e("div",Dn,[e("h4",null,g(O.manufacturer)+" "+g(O.model),1),e("div",Tn,[e("span",Rn,[e("i",{class:Z(I(O.platform))},null,2),C(" "+g(V(O.platform)),1)]),e("span",An,"Code: "+g(O.code),1),O.controllerBrand?(a(),i("span",Ln,[s[21]||(s[21]=e("i",{class:"mdi mdi-remote"},null,-1)),C(" "+g(O.controllerBrand),1)])):A("",!0),O.commandCount?(a(),i("span",{key:1,class:Z(["command-count",{"has-learned":O.learnedCount>0}])},[s[22]||(s[22]=e("i",{class:"mdi mdi-code-braces"},null,-1)),C(" "+g(O.commandCount)+" command"+g(O.commandCount!==1?"s":"")+" ",1),O.learnedCount>0?(a(),i("span",Mn," ("+g(O.learnedCount)+" learned) ",1)):A("",!0)],2)):A("",!0)])])]),e("div",On,[e("button",{onClick:T=>H(O.platform,O),class:"action-btn",title:"Edit"},[...s[23]||(s[23]=[e("i",{class:"mdi mdi-pencil"},null,-1)])],8,En),e("button",{onClick:T=>ue(O.platform,O),class:"action-btn",title:"Download"},[...s[24]||(s[24]=[e("i",{class:"mdi mdi-download"},null,-1)])],8,Vn),e("button",{onClick:T=>ce(O.platform,O),class:"action-btn delete",title:"Delete"},[...s[25]||(s[25]=[e("i",{class:"mdi mdi-delete"},null,-1)])],8,Pn)])]))),128))])),o.value.length>0&&te.value.length===0&&!x.value?(a(),i("div",Un,[...s[26]||(s[26]=[e("i",{class:"mdi mdi-filter-off"},null,-1),e("h3",null,"No profiles match your filters",-1),e("p",null,"Try adjusting your search or filter criteria",-1)])])):A("",!0)])):(a(),i("div",jn,[s[32]||(s[32]=e("div",{class:"status-badge warning"},[e("i",{class:"mdi mdi-information"}),e("span",null,"Not Installed")],-1)),e("div",Fn,[s[28]||(s[28]=e("h4",null,"Why Install SmartIR?",-1)),e("ul",Nn,[(a(!0),i(de,null,ye(((L=(Ie=u.value)==null?void 0:Ie.recommendation)==null?void 0:L.benefits)||R,(O,T)=>(a(),i("li",{key:T},[s[27]||(s[27]=e("i",{class:"mdi mdi-check"},null,-1)),e("span",null,g(O),1)]))),128))])]),e("div",Bn,[e("p",null,g(((U=(n=u.value)==null?void 0:n.recommendation)==null?void 0:U.message)||"Install SmartIR to unlock climate device support!"),1)]),e("div",{class:"card-actions"},[e("button",{onClick:he,class:"btn-primary"},[...s[29]||(s[29]=[e("i",{class:"mdi mdi-download"},null,-1),C(" Install SmartIR ",-1)])]),e("button",{onClick:h,class:"btn-secondary"},[...s[30]||(s[30]=[e("i",{class:"mdi mdi-github"},null,-1),C(" View on GitHub ",-1)])]),e("button",{onClick:B,class:"btn-secondary"},[...s[31]||(s[31]=[e("i",{class:"mdi mdi-help-circle"},null,-1),C(" Learn More ",-1)])])])]))],512),[[Je,y.value]]),ie(De,{isOpen:$.value.show,title:$.value.title,message:$.value.message,confirmText:"Delete",cancelText:"Cancel",dangerMode:!0,onConfirm:me,onCancel:s[5]||(s[5]=O=>$.value.show=!1)},null,8,["isOpen","title","message"])])}}},qn=be(Hn,[["__scopeId","data-v-88cdf67f"]]),zn={class:"climate-form"},Jn={class:"form-section"},Wn={class:"form-row"},Gn={class:"form-group"},Xn={class:"form-group"},Kn={class:"form-group"},Yn={class:"form-section"},Zn={class:"checkbox-grid"},Qn={class:"checkbox-item"},ea={class:"checkbox-item"},ta={class:"checkbox-item"},oa={class:"checkbox-item"},la={class:"checkbox-item"},sa={class:"checkbox-item"},na={class:"form-section"},aa={class:"checkbox-grid"},ia={class:"checkbox-item"},ra={class:"checkbox-item"},da={class:"checkbox-item"},ua={class:"checkbox-item"},ca={class:"form-section"},ma={class:"checkbox-grid"},va={class:"checkbox-item"},pa={class:"checkbox-item"},fa={class:"checkbox-item"},ga={class:"checkbox-item"},ya={class:"form-section"},ba={class:"form-group"},ha={class:"form-group"},ka={class:"form-group"},wa={key:0,class:"validation-summary"},$a={__name:"ClimateProfileForm",props:{modelValue:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(l,{emit:v}){const r=l,b=v,d=k({minTemp:16,maxTemp:30,precision:1,modes:["off","auto","cool","heat"],fanModes:["auto","low","medium","high"],swingModes:[],tempSensor:"",humiditySensor:"",powerSensor:"",...r.modelValue}),p=W(()=>{const w=[];return(!d.value.minTemp||d.value.minTemp<10||d.value.minTemp>35)&&w.push("Minimum temperature must be between 10Â°C and 35Â°C"),(!d.value.maxTemp||d.value.maxTemp<10||d.value.maxTemp>35)&&w.push("Maximum temperature must be between 10Â°C and 35Â°C"),d.value.minTemp>=d.value.maxTemp&&w.push("Minimum temperature must be less than maximum temperature"),(!d.value.modes||d.value.modes.length===0)&&w.push("At least one HVAC mode must be selected"),w});return re(d,w=>{b("update:modelValue",w)},{deep:!0}),(w,t)=>(a(),i("div",zn,[t[54]||(t[54]=e("h3",null,"Climate Device Configuration",-1)),e("div",Jn,[t[24]||(t[24]=e("h4",null,"Temperature Range",-1)),e("div",Wn,[e("div",Gn,[t[20]||(t[20]=e("label",null,"Minimum Temperature (Â°C) *",-1)),J(e("input",{"onUpdate:modelValue":t[0]||(t[0]=u=>d.value.minTemp=u),type:"number",min:"10",max:"35",placeholder:"16"},null,512),[[$e,d.value.minTemp,void 0,{number:!0}]])]),e("div",Xn,[t[21]||(t[21]=e("label",null,"Maximum Temperature (Â°C) *",-1)),J(e("input",{"onUpdate:modelValue":t[1]||(t[1]=u=>d.value.maxTemp=u),type:"number",min:"10",max:"35",placeholder:"30"},null,512),[[$e,d.value.maxTemp,void 0,{number:!0}]])]),e("div",Kn,[t[23]||(t[23]=e("label",null,"Precision",-1)),J(e("select",{"onUpdate:modelValue":t[2]||(t[2]=u=>d.value.precision=u)},[...t[22]||(t[22]=[e("option",{value:1},"1Â°C (Whole degrees)",-1),e("option",{value:.5},"0.5Â°C (Half degrees)",-1)])],512),[[Ce,d.value.precision,void 0,{number:!0}]])])])]),e("div",Yn,[t[31]||(t[31]=e("h4",null,"Supported HVAC Modes *",-1)),t[32]||(t[32]=e("p",{class:"help-text"},"Select all modes your device supports",-1)),e("div",Zn,[e("label",Qn,[J(e("input",{type:"checkbox",value:"off","onUpdate:modelValue":t[3]||(t[3]=u=>d.value.modes=u)},null,512),[[oe,d.value.modes]]),t[25]||(t[25]=e("span",{class:"checkbox-label"},[e("i",{class:"mdi mdi-power"}),C(" Off ")],-1))]),e("label",ea,[J(e("input",{type:"checkbox",value:"auto","onUpdate:modelValue":t[4]||(t[4]=u=>d.value.modes=u)},null,512),[[oe,d.value.modes]]),t[26]||(t[26]=e("span",{class:"checkbox-label"},[e("i",{class:"mdi mdi-autorenew"}),C(" Auto ")],-1))]),e("label",ta,[J(e("input",{type:"checkbox",value:"cool","onUpdate:modelValue":t[5]||(t[5]=u=>d.value.modes=u)},null,512),[[oe,d.value.modes]]),t[27]||(t[27]=e("span",{class:"checkbox-label"},[e("i",{class:"mdi mdi-snowflake"}),C(" Cool ")],-1))]),e("label",oa,[J(e("input",{type:"checkbox",value:"heat","onUpdate:modelValue":t[6]||(t[6]=u=>d.value.modes=u)},null,512),[[oe,d.value.modes]]),t[28]||(t[28]=e("span",{class:"checkbox-label"},[e("i",{class:"mdi mdi-fire"}),C(" Heat ")],-1))]),e("label",la,[J(e("input",{type:"checkbox",value:"dry","onUpdate:modelValue":t[7]||(t[7]=u=>d.value.modes=u)},null,512),[[oe,d.value.modes]]),t[29]||(t[29]=e("span",{class:"checkbox-label"},[e("i",{class:"mdi mdi-water-percent"}),C(" Dry ")],-1))]),e("label",sa,[J(e("input",{type:"checkbox",value:"fan_only","onUpdate:modelValue":t[8]||(t[8]=u=>d.value.modes=u)},null,512),[[oe,d.value.modes]]),t[30]||(t[30]=e("span",{class:"checkbox-label"},[e("i",{class:"mdi mdi-fan"}),C(" Fan Only ")],-1))])])]),e("div",na,[t[37]||(t[37]=e("h4",null,"Fan Modes",-1)),t[38]||(t[38]=e("p",{class:"help-text"},"Select all fan speeds your device supports",-1)),e("div",aa,[e("label",ia,[J(e("input",{type:"checkbox",value:"auto","onUpdate:modelValue":t[9]||(t[9]=u=>d.value.fanModes=u)},null,512),[[oe,d.value.fanModes]]),t[33]||(t[33]=e("span",{class:"checkbox-label"},[e("i",{class:"mdi mdi-autorenew"}),C(" Auto ")],-1))]),e("label",ra,[J(e("input",{type:"checkbox",value:"low","onUpdate:modelValue":t[10]||(t[10]=u=>d.value.fanModes=u)},null,512),[[oe,d.value.fanModes]]),t[34]||(t[34]=e("span",{class:"checkbox-label"},[e("i",{class:"mdi mdi-fan-speed-1"}),C(" Low ")],-1))]),e("label",da,[J(e("input",{type:"checkbox",value:"medium","onUpdate:modelValue":t[11]||(t[11]=u=>d.value.fanModes=u)},null,512),[[oe,d.value.fanModes]]),t[35]||(t[35]=e("span",{class:"checkbox-label"},[e("i",{class:"mdi mdi-fan-speed-2"}),C(" Medium ")],-1))]),e("label",ua,[J(e("input",{type:"checkbox",value:"high","onUpdate:modelValue":t[12]||(t[12]=u=>d.value.fanModes=u)},null,512),[[oe,d.value.fanModes]]),t[36]||(t[36]=e("span",{class:"checkbox-label"},[e("i",{class:"mdi mdi-fan-speed-3"}),C(" High ")],-1))])])]),e("div",ca,[t[43]||(t[43]=e("h4",null,"Swing Modes (Optional)",-1)),t[44]||(t[44]=e("p",{class:"help-text"},"Select if your device has swing/oscillation",-1)),e("div",ma,[e("label",va,[J(e("input",{type:"checkbox",value:"off","onUpdate:modelValue":t[13]||(t[13]=u=>d.value.swingModes=u)},null,512),[[oe,d.value.swingModes]]),t[39]||(t[39]=e("span",{class:"checkbox-label"},[e("i",{class:"mdi mdi-swap-horizontal"}),C(" Off ")],-1))]),e("label",pa,[J(e("input",{type:"checkbox",value:"vertical","onUpdate:modelValue":t[14]||(t[14]=u=>d.value.swingModes=u)},null,512),[[oe,d.value.swingModes]]),t[40]||(t[40]=e("span",{class:"checkbox-label"},[e("i",{class:"mdi mdi-swap-vertical"}),C(" Vertical ")],-1))]),e("label",fa,[J(e("input",{type:"checkbox",value:"horizontal","onUpdate:modelValue":t[15]||(t[15]=u=>d.value.swingModes=u)},null,512),[[oe,d.value.swingModes]]),t[41]||(t[41]=e("span",{class:"checkbox-label"},[e("i",{class:"mdi mdi-swap-horizontal"}),C(" Horizontal ")],-1))]),e("label",ga,[J(e("input",{type:"checkbox",value:"both","onUpdate:modelValue":t[16]||(t[16]=u=>d.value.swingModes=u)},null,512),[[oe,d.value.swingModes]]),t[42]||(t[42]=e("span",{class:"checkbox-label"},[e("i",{class:"mdi mdi-arrow-all"}),C(" Both ")],-1))])])]),e("div",ya,[t[51]||(t[51]=e("h4",null,"Sensors (Optional)",-1)),t[52]||(t[52]=e("p",{class:"help-text"},"Link external sensors for better climate control",-1)),e("div",ba,[t[45]||(t[45]=e("label",null,"Temperature Sensor",-1)),J(e("input",{"onUpdate:modelValue":t[17]||(t[17]=u=>d.value.tempSensor=u),type:"text",placeholder:"sensor.living_room_temperature"},null,512),[[$e,d.value.tempSensor]]),t[46]||(t[46]=e("small",null,"Entity ID of temperature sensor",-1))]),e("div",ha,[t[47]||(t[47]=e("label",null,"Humidity Sensor",-1)),J(e("input",{"onUpdate:modelValue":t[18]||(t[18]=u=>d.value.humiditySensor=u),type:"text",placeholder:"sensor.living_room_humidity"},null,512),[[$e,d.value.humiditySensor]]),t[48]||(t[48]=e("small",null,"Entity ID of humidity sensor",-1))]),e("div",ka,[t[49]||(t[49]=e("label",null,"Power Sensor",-1)),J(e("input",{"onUpdate:modelValue":t[19]||(t[19]=u=>d.value.powerSensor=u),type:"text",placeholder:"binary_sensor.ac_power"},null,512),[[$e,d.value.powerSensor]]),t[50]||(t[50]=e("small",null,"Entity ID of power sensor (to detect on/off state)",-1))])]),p.value.length>0?(a(),i("div",wa,[t[53]||(t[53]=e("h4",null,[e("i",{class:"mdi mdi-alert-circle"}),C(" Please fix the following: ")],-1)),e("ul",null,[(a(!0),i(de,null,ye(p.value,(u,x)=>(a(),i("li",{key:x},g(u),1))),128))])])):A("",!0)]))}},Ca=be($a,[["__scopeId","data-v-691429a1"]]),Sa={class:"command-wizard"},_a={class:"device-selection-section"},Ia={class:"form-group"},xa=["value"],Da={class:"form-group"},Ta={key:0,class:"edit-mode-banner"},Ra={class:"wizard-info"},Aa={key:0},La={key:1},Ma={class:"progress-info"},Oa={class:"progress-bar"},Ea={class:"progress-text"},Va={class:"commands-grid"},Pa={class:"command-header"},Ua={class:"command-icon"},ja={class:"command-info"},Fa={key:0,class:"learning-indicator"},Na={key:0,class:"ir-learning-steps"},Ba={key:1,class:"rf-learning-steps"},Ha={class:"command-actions"},qa=["onClick","disabled"],za={key:1,class:"learned-status"},Ja=["onClick"],Wa={class:"quick-actions"},Ga=["disabled"],Xa=["disabled"],Ka={__name:"CommandLearningWizard",props:{modelValue:{type:Object,default:()=>({})},platform:{type:String,required:!0},config:{type:Object,required:!0},broadlinkDevice:{type:String,default:""},manufacturer:{type:String,required:!0},model:{type:String,required:!0},commandType:{type:String,default:"ir"}},emits:["update:modelValue","update:broadlinkDevice","update:commandType"],setup(l,{emit:v}){const r=Le(),b=l,d=v,p=k({...b.modelValue}),w=k(null),t=k([]),u=k(b.broadlinkDevice),x=k(b.commandType),M=k(!1),y=k([]),o=k(!1),_=k({show:!1,commandKey:null,commandLabel:""}),D=k(!1),$=W(()=>{const B=[];if(b.platform==="climate"){const h=b.config.modes||[],m=b.config.fanModes||[],H=b.config.minTemp||16,ue=b.config.maxTemp||30;h.forEach(ce=>{if(ce==="off")B.push({key:"off",label:"Power Off",description:"Turn device off",icon:"mdi mdi-power",mode:"off"});else for(let me=H;me<=ue;me++)m.forEach(S=>{const s=`${ce}_${me}_${S}`;B.push({key:s,label:`${ce.toUpperCase()} ${me}Â°C ${S}`,description:`Mode: ${ce}, Temp: ${me}Â°C, Fan: ${S}`,icon:c(ce),mode:ce,temp:me,fanMode:S})})})}else if(b.platform==="media_player"){const h=b.config.features||[];h.includes("turn_on")&&(B.push({key:"turn_on",label:"Power On",description:"Turn on the device",icon:"mdi mdi-power"}),B.push({key:"turn_off",label:"Power Off",description:"Turn off the device",icon:"mdi mdi-power-off"})),h.includes("volume")&&(B.push({key:"volume_up",label:"Volume Up",description:"Increase volume",icon:"mdi mdi-volume-plus"}),B.push({key:"volume_down",label:"Volume Down",description:"Decrease volume",icon:"mdi mdi-volume-minus"})),h.includes("mute")&&B.push({key:"mute",label:"Mute",description:"Toggle mute",icon:"mdi mdi-volume-mute"}),h.includes("source")&&(B.push({key:"source_hdmi1",label:"Source: HDMI 1",description:"Switch to HDMI 1",icon:"mdi mdi-import"}),B.push({key:"source_hdmi2",label:"Source: HDMI 2",description:"Switch to HDMI 2",icon:"mdi mdi-import"}),B.push({key:"source_hdmi3",label:"Source: HDMI 3",description:"Switch to HDMI 3",icon:"mdi mdi-import"})),h.includes("channel")&&(B.push({key:"channel_up",label:"Channel Up",description:"Next channel",icon:"mdi mdi-chevron-up"}),B.push({key:"channel_down",label:"Channel Down",description:"Previous channel",icon:"mdi mdi-chevron-down"}))}else if(b.platform==="fan"){const h=b.config.speedLevels||3,m=b.config.features||[];B.push({key:"turn_on",label:"Power On",description:"Turn on the fan",icon:"mdi mdi-power"}),B.push({key:"turn_off",label:"Power Off",description:"Turn off the fan",icon:"mdi mdi-power-off"});for(let H=1;H<=h;H++){const ue=H===1?"Low":H===h?"High":H===2&&h===3?"Medium":`Speed ${H}`;B.push({key:`speed_${H}`,label:`${ue}`,description:`Set fan to speed level ${H}`,icon:"mdi mdi-fan"})}m.includes("oscillate")&&(B.push({key:"oscillate_on",label:"Oscillate On",description:"Enable oscillation",icon:"mdi mdi-sync"}),B.push({key:"oscillate_off",label:"Oscillate Off",description:"Disable oscillation",icon:"mdi mdi-sync-off"})),m.includes("direction")&&(B.push({key:"direction_forward",label:"Direction: Forward",description:"Set direction to forward",icon:"mdi mdi-rotate-right"}),B.push({key:"direction_reverse",label:"Direction: Reverse",description:"Set direction to reverse",icon:"mdi mdi-rotate-left"}))}else if(b.platform==="light"){const h=b.config.features||[];h.includes("turn_on")&&(B.push({key:"turn_on",label:"Power On",description:"Turn on the light",icon:"mdi mdi-lightbulb-on"}),B.push({key:"turn_off",label:"Power Off",description:"Turn off the light",icon:"mdi mdi-lightbulb-off"})),h.includes("brightness")&&(B.push({key:"brightness_up",label:"Brightness Up",description:"Increase brightness",icon:"mdi mdi-brightness-7"}),B.push({key:"brightness_down",label:"Brightness Down",description:"Decrease brightness",icon:"mdi mdi-brightness-5"})),h.includes("color_temp")&&(B.push({key:"color_temp_warm",label:"Warm White",description:"Set to warm white",icon:"mdi mdi-weather-sunset"}),B.push({key:"color_temp_cool",label:"Cool White",description:"Set to cool white",icon:"mdi mdi-weather-sunny"})),h.includes("rgb")&&(B.push({key:"color_red",label:"Color: Red",description:"Set color to red",icon:"mdi mdi-palette"}),B.push({key:"color_green",label:"Color: Green",description:"Set color to green",icon:"mdi mdi-palette"}),B.push({key:"color_blue",label:"Color: Blue",description:"Set color to blue",icon:"mdi mdi-palette"}))}return B}),R=W(()=>$.value.length),j=W(()=>Object.keys(p.value).length),P=W(()=>R.value===0?0:Math.round(j.value/R.value*100));function c(B){return{off:"mdi mdi-power",auto:"mdi mdi-autorenew",cool:"mdi mdi-snowflake",heat:"mdi mdi-fire",dry:"mdi mdi-water-percent",fan_only:"mdi mdi-fan"}[B]||"mdi mdi-remote"}async function F(B){if(!w.value){w.value=B.key;try{const h=b.manufacturer.toLowerCase().replace(/[^a-z0-9]+/g,"_"),m=b.model.toLowerCase().replace(/[^a-z0-9]+/g,"_"),H=`${h}_${m}`,ue=await fetch("/api/commands/learn",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({entity_id:u.value,device:H,command:B.key,command_type:x.value})});if(!ue.ok)throw new Error(`Failed to learn command: ${ue.statusText}`);const ce=await ue.json();if(ce.success&&ce.code)p.value[B.key]=ce.code,d("update:modelValue",p.value),o.value=!0,M.value&&y.value.length>0&&setTimeout(()=>{const me=y.value.shift();me?F(me):M.value=!1},1e3);else throw new Error(ce.error||"Failed to learn command")}catch(h){console.error("Error learning command:",h),r.error(`Error learning command: ${h.message}`),M.value=!1,y.value=[]}finally{M.value||(w.value=null)}}}function X(B){const h=$.value.find(m=>m.key===B);_.value={show:!0,commandKey:B,commandLabel:h?h.label:B}}function te(){const B=_.value.commandKey;delete p.value[B],d("update:modelValue",p.value),_.value.show=!1}function Q(){const B=$.value.filter(m=>!p.value[m.key]);if(B.length===0)return;M.value=!0,y.value=[...B];const h=y.value.shift();h&&F(h)}function ge(){D.value=!0}function I(){p.value={},d("update:modelValue",p.value),D.value=!1}re(()=>b.modelValue,B=>{p.value={...B}},{deep:!0}),Se(async()=>{await V()});async function V(){try{const B=b.manufacturer.toLowerCase().replace(/[^a-z0-9]+/g,"_"),h=b.model.toLowerCase().replace(/[^a-z0-9]+/g,"_"),m=`${B}_${h}`,H=await fetch(`/api/commands/broadlink/${m}`);if(!H.ok)return;const ue=await H.json();if(ue.commands){const ce=$.value.map(S=>S.key),me={};for(const[S,s]of Object.entries(ue.commands))ce.includes(S)&&(me[S]=s);Object.keys(me).length>0&&(p.value={...p.value,...me},d("update:modelValue",p.value),console.log(`Loaded ${Object.keys(me).length} existing commands for ${m}`))}}catch(B){console.error("Error loading existing commands:",B)}}function G(){d("update:broadlinkDevice",u.value)}function se(){d("update:commandType",x.value)}async function he(){try{const B=await fetch("/api/remote/devices");if(B.ok){const m=(await B.json()).devices||[];t.value=m}}catch(B){console.error("Error loading remote devices:",B),t.value=[]}}return re(()=>b.broadlinkDevice,B=>{u.value=B}),re(()=>b.commandType,B=>{x.value=B}),Se(async()=>{await he(),await V()}),(B,h)=>(a(),i("div",Sa,[h[22]||(h[22]=e("h3",null,"Learn IR Commands",-1)),e("div",_a,[e("div",Ia,[h[5]||(h[5]=e("label",null,"Broadlink Device *",-1)),J(e("select",{"onUpdate:modelValue":h[0]||(h[0]=m=>u.value=m),onChange:G},[h[4]||(h[4]=e("option",{value:""},"Select Broadlink device...",-1)),(a(!0),i(de,null,ye(t.value,m=>(a(),i("option",{key:m.entity_id,value:m.entity_id},g(m.name)+" ("+g(m.area_name)+") ",9,xa))),128))],544),[[Ce,u.value]]),e("small",null,"This device will be used to learn commands ("+g(t.value.length)+" devices found)",1)]),e("div",Da,[h[7]||(h[7]=e("label",null,"Command Type *",-1)),J(e("select",{"onUpdate:modelValue":h[1]||(h[1]=m=>x.value=m),onChange:se},[...h[6]||(h[6]=[e("option",{value:"ir"},"ğŸ“¡ Infrared (IR) - Most common for AC, TV, etc.",-1),e("option",{value:"rf"},"ğŸ“» Radio Frequency (RF) - For RF remotes",-1)])],544),[[Ce,x.value]]),h[8]||(h[8]=e("small",null,"Select the type of commands your device uses",-1))])]),j.value>0&&!o.value?(a(),i("div",Ta,[h[10]||(h[10]=e("i",{class:"mdi mdi-information-outline"},null,-1)),e("div",null,[h[9]||(h[9]=e("strong",null,"Editing Existing Profile",-1)),e("p",null,g(j.value)+" command"+g(j.value!==1?"s":"")+' already learned. You can re-learn any command by clicking the delete icon and then "Learn Command".',1)])])):A("",!0),e("div",Ra,[h[14]||(h[14]=e("i",{class:"mdi mdi-information"},null,-1)),e("div",null,[h[13]||(h[13]=e("p",null,[e("strong",null,"How it works:")],-1)),l.commandType==="ir"?(a(),i("ol",Aa,[...h[11]||(h[11]=[e("li",null,'Click "Learn Command" for each combination',-1),e("li",null,[e("strong",null,"Point your IR remote directly at the Broadlink device")],-1),e("li",null,"Press the button on your remote",-1),e("li",null,"Wait for confirmation (up to 30 seconds)",-1)])])):(a(),i("ol",La,[...h[12]||(h[12]=[e("li",null,'Click "Learn Command" for each combination',-1),e("li",null,[e("strong",null,"Step 1:"),C(" Hold button on remote - Broadlink scans for RF frequency")],-1),e("li",null,[e("strong",null,"Step 2:"),C(" Watch for Home Assistant notification, then press and release button")],-1),e("li",null,"Keep remote within 5cm of Broadlink (RF doesn't need line-of-sight)",-1),e("li",null,"Wait for confirmation (may take up to 30 seconds)",-1)])]))])]),e("div",Ma,[e("div",Oa,[e("div",{class:"progress-fill",style:Ye({width:P.value+"%"})},null,4)]),e("span",Ea,g(j.value)+" / "+g(R.value)+" commands learned ("+g(P.value)+"%) ",1)]),e("div",Va,[(a(!0),i(de,null,ye($.value,m=>(a(),i("div",{key:m.key,class:Z(["command-card",{learned:p.value[m.key],learning:w.value===m.key}])},[e("div",Pa,[e("div",Ua,[e("i",{class:Z(m.icon)},null,2)]),e("div",ja,[e("h4",null,g(m.label),1),e("p",null,g(m.description),1)])]),w.value===m.key?(a(),i("div",Fa,[l.commandType==="ir"?(a(),i("div",Na,[...h[15]||(h[15]=[e("p",null,[e("strong",null,"Point your remote directly at the Broadlink device and press the button.")],-1),e("small",null,"Listening for up to 30 seconds...",-1)])])):(a(),i("div",Ba,[...h[16]||(h[16]=[e("p",{class:"rf-title"},[e("strong",null,"Learning request sent to device.")],-1),e("p",{class:"rf-subtitle"},[C("RF learning is a "),e("strong",null,"two-step process"),C(":")],-1),e("ol",null,[e("li",null,[e("strong",null,"Step 1 - Frequency Sweep (~10-15 seconds):"),C(" Press and hold the button on your remote until the notification updates. ")]),e("li",null,[e("strong",null,"Step 2 - Learn Signal:"),C(" Press and release the button once. ")])],-1),e("p",{class:"rf-note"},"Follow the Home Assistant notifications (ğŸ””) for real-time instructions.",-1)])]))])):A("",!0),e("div",Ha,[p.value[m.key]?(a(),i("div",za,[h[18]||(h[18]=e("i",{class:"mdi mdi-check-circle"},null,-1)),h[19]||(h[19]=e("span",null,"Learned",-1)),e("button",{onClick:H=>X(m.key),class:"btn-delete",title:"Delete and re-learn"},[...h[17]||(h[17]=[e("i",{class:"mdi mdi-delete"},null,-1)])],8,Ja)])):(a(),i("button",{key:0,onClick:H=>F(m),class:Z(["btn-learn",{learning:w.value===m.key}]),disabled:w.value!==null},[e("i",{class:Z(["mdi mdi-radio-tower",{"mdi-spin":w.value===m.key}])},null,2),C(" "+g(w.value===m.key?"Listening...":"Learn Command"),1)],10,qa))])],2))),128))]),e("div",Wa,[e("button",{onClick:Q,class:"btn-secondary",disabled:w.value!==null||j.value===R.value},[...h[20]||(h[20]=[e("i",{class:"mdi mdi-play-circle"},null,-1),C(" Learn All Remaining ",-1)])],8,Ga),e("button",{onClick:ge,class:"btn-text",disabled:j.value===0},[...h[21]||(h[21]=[e("i",{class:"mdi mdi-delete-sweep"},null,-1),C(" Clear All ",-1)])],8,Xa)]),ie(De,{isOpen:_.value.show,title:"Delete Learned Command?",message:`Are you sure you want to delete the '${_.value.commandLabel}' command?

You will need to re-learn this command.`,confirmText:"Delete",cancelText:"Cancel",dangerMode:!0,onConfirm:te,onCancel:h[2]||(h[2]=m=>_.value.show=!1)},null,8,["isOpen","message"]),ie(De,{isOpen:D.value,title:"Delete All Learned Commands?",message:"Are you sure you want to delete all learned commands? This cannot be undone.\\n\\nYou will need to re-learn all commands.",confirmText:"Delete All",cancelText:"Cancel",dangerMode:!0,onConfirm:I,onCancel:h[3]||(h[3]=m=>D.value=!1)},null,8,["isOpen"])]))}},Ya=be(Ka,[["__scopeId","data-v-9e4f6786"]]),Za={class:"profile-preview"},Qa={class:"preview-summary"},ei={class:"summary-card"},ti={class:"stats-grid"},oi={class:"stat-item"},li={class:"stat-value"},si={class:"stat-item"},ni={class:"stat-value"},ai={class:"stat-item"},ii={class:"stat-value"},ri={class:"preview-tabs"},di={class:"preview-content"},ui={key:0,class:"tab-content"},ci={class:"code-header"},mi={class:"code-block"},vi={key:1,class:"tab-content"},pi={class:"code-header"},fi={class:"code-block"},gi={key:2,class:"tab-content"},yi={class:"instructions"},bi={class:"step-item"},hi={class:"step-content"},ki={class:"code-path"},wi={__name:"ProfilePreview",props:{profile:{type:Object,required:!0},jsonData:{type:Object,required:!0},yamlConfig:{type:String,required:!0}},setup(l){const v=Le(),r=l,b=k("json"),d=k(!1),p=k(!1),w=W(()=>Object.keys(r.profile.commands||{}).length),t=W(()=>JSON.stringify(r.jsonData,null,2));async function u(){try{await navigator.clipboard.writeText(t.value),d.value=!0,setTimeout(()=>{d.value=!1},2e3)}catch(M){console.error("Failed to copy JSON:",M),v.error("Failed to copy to clipboard")}}async function x(){try{await navigator.clipboard.writeText(r.yamlConfig),p.value=!0,setTimeout(()=>{p.value=!1},2e3)}catch(M){console.error("Failed to copy YAML:",M),v.error("Failed to copy to clipboard")}}return(M,y)=>{var o;return a(),i("div",Za,[y[22]||(y[22]=e("h3",null,"Preview & Save",-1)),e("div",Qa,[e("div",ei,[y[4]||(y[4]=e("i",{class:"mdi mdi-check-circle"},null,-1)),e("div",null,[y[3]||(y[3]=e("h4",null,"Profile Ready!",-1)),e("p",null,g(l.profile.manufacturer)+" "+g(l.profile.model),1)])]),e("div",ti,[e("div",oi,[e("span",li,g(w.value),1),y[5]||(y[5]=e("span",{class:"stat-label"},"Commands Learned",-1))]),e("div",si,[e("span",ni,g(l.profile.platform),1),y[6]||(y[6]=e("span",{class:"stat-label"},"Platform",-1))]),e("div",ai,[e("span",ii,g(((o=l.profile.config.modes)==null?void 0:o.length)||0),1),y[7]||(y[7]=e("span",{class:"stat-label"},"HVAC Modes",-1))])])]),e("div",ri,[e("button",{onClick:y[0]||(y[0]=_=>b.value="json"),class:Z(["tab-button",{active:b.value==="json"}])},[...y[8]||(y[8]=[e("i",{class:"mdi mdi-code-json"},null,-1),C(" SmartIR JSON ",-1)])],2),e("button",{onClick:y[1]||(y[1]=_=>b.value="yaml"),class:Z(["tab-button",{active:b.value==="yaml"}])},[...y[9]||(y[9]=[e("i",{class:"mdi mdi-file-code"},null,-1),C(" YAML Config ",-1)])],2),e("button",{onClick:y[2]||(y[2]=_=>b.value="instructions"),class:Z(["tab-button",{active:b.value==="instructions"}])},[...y[10]||(y[10]=[e("i",{class:"mdi mdi-information"},null,-1),C(" Instructions ",-1)])],2)]),e("div",di,[b.value==="json"?(a(),i("div",ui,[e("div",ci,[y[12]||(y[12]=e("h4",null,"SmartIR Device Code JSON",-1)),e("button",{onClick:u,class:"btn-copy"},[y[11]||(y[11]=e("i",{class:"mdi mdi-content-copy"},null,-1)),C(" "+g(d.value?"Copied!":"Copy"),1)])]),e("pre",mi,[e("code",null,g(t.value),1)]),y[13]||(y[13]=e("p",{class:"code-note"},[e("i",{class:"mdi mdi-information"}),C(" Save this as "),e("code",null,"10000.json"),C(" in your SmartIR codes directory ")],-1))])):A("",!0),b.value==="yaml"?(a(),i("div",vi,[e("div",pi,[y[15]||(y[15]=e("h4",null,"Home Assistant Configuration",-1)),e("button",{onClick:x,class:"btn-copy"},[y[14]||(y[14]=e("i",{class:"mdi mdi-content-copy"},null,-1)),C(" "+g(p.value?"Copied!":"Copy"),1)])]),e("pre",fi,[e("code",null,g(l.yamlConfig),1)]),y[16]||(y[16]=e("p",{class:"code-note"},[e("i",{class:"mdi mdi-information"}),C(" Add this to your "),e("code",null,"configuration.yaml"),C(" file ")],-1))])):A("",!0),b.value==="instructions"?(a(),i("div",gi,[e("div",yi,[y[20]||(y[20]=e("h4",null,"Installation Steps",-1)),e("div",bi,[y[19]||(y[19]=e("div",{class:"step-number"},"1",-1)),e("div",hi,[y[17]||(y[17]=e("h5",null,"Get Next Code Number",-1)),y[18]||(y[18]=e("p",null,"Custom device codes start at 10000. Check your SmartIR codes directory to find the next available number.",-1)),e("div",ki,[e("code",null,"/config/custom_components/smartir/codes/"+g(l.profile.platform)+"/",1)])])]),y[21]||(y[21]=Re('<div class="step-item" data-v-cbf0874d><div class="step-number" data-v-cbf0874d>2</div><div class="step-content" data-v-cbf0874d><h5 data-v-cbf0874d>Save JSON File</h5><p data-v-cbf0874d>Copy the JSON from the &quot;SmartIR JSON&quot; tab and save it as <code data-v-cbf0874d>10000.json</code> (or your next available number) in the codes directory.</p></div></div><div class="step-item" data-v-cbf0874d><div class="step-number" data-v-cbf0874d>3</div><div class="step-content" data-v-cbf0874d><h5 data-v-cbf0874d>Update Configuration</h5><p data-v-cbf0874d>Copy the YAML from the &quot;YAML Config&quot; tab and add it to your <code data-v-cbf0874d>configuration.yaml</code> file. Update the <code data-v-cbf0874d>device_code</code> to match your JSON filename.</p></div></div><div class="step-item" data-v-cbf0874d><div class="step-number" data-v-cbf0874d>4</div><div class="step-content" data-v-cbf0874d><h5 data-v-cbf0874d>Restart Home Assistant</h5><p data-v-cbf0874d>Restart Home Assistant to load the new configuration. Your climate entity will appear in the UI.</p></div></div><div class="step-item" data-v-cbf0874d><div class="step-number" data-v-cbf0874d>5</div><div class="step-content" data-v-cbf0874d><h5 data-v-cbf0874d>Test Your Device</h5><p data-v-cbf0874d>Go to your climate entity and test different modes, temperatures, and fan speeds to ensure everything works correctly.</p></div></div><div class="tips-section" data-v-cbf0874d><h4 data-v-cbf0874d><i class="mdi mdi-lightbulb" data-v-cbf0874d></i> Tips </h4><ul data-v-cbf0874d><li data-v-cbf0874d>Keep a backup of your JSON file in case you need to modify it</li><li data-v-cbf0874d>Test all commands to ensure they work as expected</li><li data-v-cbf0874d>You can share your profile with the SmartIR community on GitHub</li><li data-v-cbf0874d>If a command doesn&#39;t work, you can re-learn it and update the JSON</li></ul></div>',5))])])):A("",!0)])])}}},$i=be(wi,[["__scopeId","data-v-cbf0874d"]]),Ci={class:"wizard-body"},Si={key:0,class:"warning-section"},_i={class:"warning-box"},Ii={class:"instructions"},xi={class:"code-block"},Di={class:"steps"},Ti={key:0},Ri={class:"help-section"},Ai={key:0,class:"help-content"},Li={class:"help-step"},Mi={key:0,class:"help-step"},Oi={class:"help-step"},Ei={class:"help-step"},Vi={class:"checklist"},Pi={class:"checkbox-label"},Ui={key:0,class:"checkbox-label"},ji={class:"wizard-footer"},Fi=["disabled"],Ni={__name:"SmartIRSetupWizard",props:{show:{type:Boolean,default:!1},platform:{type:String,required:!0},warnings:{type:Array,default:()=>[]},configPath:{type:String,default:"/config"}},emits:["close","complete"],setup(l,{emit:v}){const r=l,b=v,d=we("toast"),p=k(!1),w=k(!1),t=k(!1),u=W(()=>r.warnings.length>0?p.value&&w.value:p.value);function x(){const y=`${r.platform}: !include smartir/${r.platform}.yaml`;navigator.clipboard.writeText(y).then(()=>{var o;(o=d.value)==null||o.success("Include line copied to clipboard!","âœ… Copied")}).catch(o=>{var _;console.error("Failed to copy:",o),(_=d.value)==null||_.error("Failed to copy to clipboard","âŒ Copy Failed")})}function M(){b("complete")}return(y,o)=>l.show?(a(),i("div",{key:0,class:"modal-overlay",onClick:o[5]||(o[5]=ae(()=>{},["stop"]))},[e("div",{class:"setup-wizard",onClick:o[4]||(o[4]=ae(()=>{},["stop"]))},[o[31]||(o[31]=e("div",{class:"wizard-header"},[e("h2",null,[e("i",{class:"mdi mdi-cog"}),C(" SmartIR Configuration Setup ")])],-1)),e("div",Ci,[l.warnings.length>0?(a(),i("div",Si,[e("div",_i,[o[11]||(o[11]=e("i",{class:"mdi mdi-alert"},null,-1)),e("div",null,[o[9]||(o[9]=e("h3",null,"âš ï¸ Configuration Migration Needed",-1)),o[10]||(o[10]=e("p",null,"We detected existing platform entries in your configuration.yaml:",-1)),e("ul",null,[(a(!0),i(de,null,ye(l.warnings,_=>(a(),i("li",{key:_.platform},[e("strong",null,g(_.platform)+":",1),C(" "+g(_.message),1)]))),128))]),e("p",null,[o[6]||(o[6]=e("strong",null,"Action Required:",-1)),o[7]||(o[7]=C(" Move these entries to ",-1)),e("code",null,"smartir/"+g(l.platform)+".yaml",1),o[8]||(o[8]=C(" before continuing.",-1))])])])])):A("",!0),e("div",Ii,[o[27]||(o[27]=e("h3",null,"ğŸ“ One-Time Setup",-1)),o[28]||(o[28]=e("p",null,[C("To enable SmartIR device management, add this line to your "),e("code",null,"configuration.yaml"),C(":")],-1)),e("div",xi,[e("code",null,g(l.platform)+": !include smartir/"+g(l.platform)+".yaml",1),e("button",{onClick:x,class:"copy-btn",title:"Copy to clipboard"},[...o[12]||(o[12]=[e("i",{class:"mdi mdi-content-copy"},null,-1)])])]),e("div",Di,[o[19]||(o[19]=e("h4",null,"Steps:",-1)),e("ol",null,[l.warnings.length>0?(a(),i("li",Ti,[o[13]||(o[13]=e("strong",null,"Move existing entries:",-1)),o[14]||(o[14]=C(" Copy any existing ",-1)),e("code",null,g(l.platform)+":",1),o[15]||(o[15]=C(" entries from configuration.yaml to ",-1)),e("code",null,"smartir/"+g(l.platform)+".yaml",1)])):A("",!0),o[16]||(o[16]=e("li",null,[e("strong",null,"Add include line:"),C(" Add the line above to your configuration.yaml ")],-1)),o[17]||(o[17]=e("li",null,[e("strong",null,"Save changes:"),C(" Save configuration.yaml ")],-1)),o[18]||(o[18]=e("li",null,[e("strong",null,"Continue here:"),C(` Click "I've Completed Setup" below `)],-1))])]),e("div",Ri,[e("button",{onClick:o[0]||(o[0]=_=>t.value=!t.value),class:"help-toggle"},[e("i",{class:Z(["mdi",t.value?"mdi-chevron-up":"mdi-chevron-down"])},null,2),C(" "+g(t.value?"Hide":"Show")+" Detailed Instructions ",1)]),t.value?(a(),i("div",Ai,[o[26]||(o[26]=e("h4",null,"Detailed Setup Guide:",-1)),e("div",Li,[o[21]||(o[21]=e("h5",null,"1. Open configuration.yaml",-1)),e("p",null,[o[20]||(o[20]=C("Location: ",-1)),e("code",null,g(l.configPath)+"/configuration.yaml",1)])]),l.warnings.length>0?(a(),i("div",Mi,[o[22]||(o[22]=e("h5",null,"2. Migrate Existing Entries (If Any)",-1)),e("p",null,"If you have existing "+g(l.platform)+" entries, cut them from configuration.yaml and paste into:",1),e("p",null,[e("code",null,g(l.configPath)+"/smartir/"+g(l.platform)+".yaml",1)]),o[23]||(o[23]=e("p",{class:"note"},"Broadlink Manager will create this file automatically.",-1))])):A("",!0),e("div",Oi,[e("h5",null,g(l.warnings.length>0?"3":"2")+". Add Include Line",1),o[24]||(o[24]=e("p",null,"Add this to configuration.yaml:",-1)),e("pre",null,g(l.platform)+": !include smartir/"+g(l.platform)+".yaml",1)]),e("div",Ei,[e("h5",null,g(l.warnings.length>0?"4":"3")+". Restart Home Assistant",1),o[25]||(o[25]=e("p",null,"After saving, you'll need to restart HA for changes to take effect.",-1))])])):A("",!0)])]),e("div",Vi,[e("label",Pi,[J(e("input",{type:"checkbox","onUpdate:modelValue":o[1]||(o[1]=_=>p.value=_)},null,512),[[oe,p.value]]),o[29]||(o[29]=e("span",null,"I've added the include line to configuration.yaml",-1))]),l.warnings.length>0?(a(),i("label",Ui,[J(e("input",{type:"checkbox","onUpdate:modelValue":o[2]||(o[2]=_=>w.value=_)},null,512),[[oe,w.value]]),e("span",null,"I've migrated existing "+g(l.platform)+" entries (if any)",1)])):A("",!0)])]),e("div",ji,[e("button",{onClick:o[3]||(o[3]=_=>y.$emit("close")),class:"btn-secondary"}," Cancel "),e("button",{onClick:M,class:"btn-primary",disabled:!u.value},[...o[30]||(o[30]=[e("i",{class:"mdi mdi-check"},null,-1),C(" I've Completed Setup ",-1)])],8,Fi)])])])):A("",!0)}},Bi=be(Ni,[["__scopeId","data-v-f6fe4c03"]]),Hi={class:"modal-header"},qi={class:"progress-steps"},zi={class:"step-number"},Ji={key:0,class:"mdi mdi-check"},Wi={key:1},Gi={class:"step-label"},Xi={class:"modal-body"},Ki={key:0,class:"step-content"},Yi={class:"form-group"},Zi={class:"form-group"},Qi={class:"form-group"},er={key:1,class:"step-content"},tr={key:1,class:"platform-form"},or={class:"form-section"},lr={class:"checkbox-grid"},sr={class:"checkbox-item"},nr={class:"checkbox-item"},ar={class:"checkbox-item"},ir={class:"checkbox-item"},rr={class:"checkbox-item"},dr={key:2,class:"platform-form"},ur={class:"form-section"},cr={class:"form-group"},mr={class:"form-section"},vr={class:"checkbox-grid"},pr={class:"checkbox-item"},fr={class:"checkbox-item"},gr={key:3,class:"platform-form"},yr={class:"form-section"},br={class:"checkbox-grid"},hr={class:"checkbox-item"},kr={class:"checkbox-item"},wr={class:"checkbox-item"},$r={class:"checkbox-item"},Cr={key:2,class:"step-content"},Sr={key:3,class:"step-content"},_r={class:"modal-footer"},Ir=["disabled"],xr={key:2,class:"save-buttons"},Dr=["disabled"],Tr=["disabled"],Rr={__name:"SmartIRProfileBuilder",props:{show:{type:Boolean,default:!1},editMode:{type:Boolean,default:!1},editData:{type:Object,default:null}},emits:["close","save"],setup(l,{emit:v}){const r=l,b=v,d=we("toast"),p=k(0),w=k(!1),t=k([]),u=k(!1),x=k([]),M=k("/config"),y=k(!1),o=k(null),_=k(!1),D=k(!1),$=k(""),R=k("ir"),j=k(!1),P=[{label:"Device Info",key:"info"},{label:"Configuration",key:"config"},{label:"Learn Commands",key:"commands"},{label:"Preview & Save",key:"preview"}],c=k({platform:"",manufacturer:"",model:"",broadlinkDevice:"",commandType:"ir",config:{},commands:{}}),F=k(["turn_on"]),X=k(3),te=k([]),Q=k(["turn_on"]);re(()=>c.value.platform,L=>{L==="media_player"?c.value.config={features:F.value}:L==="fan"?c.value.config={speedLevels:X.value,features:te.value}:L==="light"&&(c.value.config={features:Q.value})}),re(F,L=>{c.value.platform==="media_player"&&(c.value.config={features:L})},{deep:!0}),re(X,L=>{c.value.platform==="fan"&&(c.value.config={speedLevels:L,features:te.value})}),re(te,L=>{c.value.platform==="fan"&&(c.value.config={speedLevels:X.value,features:L})},{deep:!0}),re(Q,L=>{c.value.platform==="light"&&(c.value.config={features:L})},{deep:!0});function ge(L){const n=new Set,U=Object.keys(L);return U.some(O=>O==="off"||O.includes("_off"))&&n.add("off"),U.some(O=>O.includes("auto"))&&n.add("auto"),U.some(O=>O.includes("cool"))&&n.add("cool"),U.some(O=>O.includes("heat"))&&n.add("heat"),U.some(O=>O.includes("dry"))&&n.add("dry"),U.some(O=>O.includes("fan_only"))&&n.add("fan_only"),Array.from(n)}function I(L){const n=new Set,U=Object.keys(L);return U.some(O=>O.includes("auto"))&&n.add("auto"),U.some(O=>O.includes("low"))&&n.add("low"),U.some(O=>O.includes("medium")||O.includes("mid"))&&n.add("medium"),U.some(O=>O.includes("high"))&&n.add("high"),Array.from(n)}function V(L){const n=new Set,U=Object.keys(L);return U.some(O=>O.includes("swing_off")||O.includes("_off"))&&n.add("off"),U.some(O=>O.includes("vertical"))&&n.add("vertical"),U.some(O=>O.includes("horizontal"))&&n.add("horizontal"),U.some(O=>O.includes("both"))&&n.add("both"),Array.from(n)}function G(L){for(const n of Object.values(L))if(typeof n=="string"&&n.startsWith("sc")||Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0].startsWith("sc"))return"rf";return"ir"}re(()=>c.value.commandType,(L,n)=>{!n||_.value||j.value||(Object.keys(c.value.commands).length>0&&L!==n?($.value=L,c.value.commandType=n,_.value=!0):L!==n&&(R.value=L))}),re(()=>r.editData,async L=>{var n,U;if(L&&r.editMode){console.log("ğŸ”§ Edit mode activated, loading profile data:",L),j.value=!0,t.value.length===0&&(console.log("ğŸ“¡ Loading Broadlink devices..."),await Ie(),console.log("ğŸ“¡ Devices loaded:",t.value.length));const O=L.profile,T=O.controller_data;console.log("ğŸ® Controller data from profile:",T),console.log("ğŸ® Available devices:",t.value.map(z=>z.entity_id));const f=O.commands||{},E=G(f);console.log("ğŸ” Inferred command type:",E);let N={};if(L.platform==="climate"){const z=O.operationModes||ge(f),ee=O.fanModes||I(f),K=O.swingModes||V(f);console.log("ğŸ” Inferred modes:",z),console.log("ğŸ” Inferred fan modes:",ee),console.log("ğŸ” Inferred swing modes:",K),N={minTemp:O.minTemperature,maxTemp:O.maxTemperature,precision:O.precision,modes:z,fanModes:ee,swingModes:K}}else if(L.platform==="media_player"){const z=[];(f.on||f.off)&&z.push("turn_on"),(f.volumeUp||f.volumeDown)&&z.push("volume"),f.mute&&z.push("mute"),f.sources&&z.push("source"),(f.channelUp||f.channelDown)&&z.push("channel"),N={features:z},F.value=z,console.log("ğŸ” Inferred media player features:",z)}else if(L.platform==="fan"){const z=((n=O.speed)==null?void 0:n.length)||Object.keys(f.default||{}).length||3,ee=[];(f.oscillate_on||f.oscillate_off)&&ee.push("oscillate"),(f.direction_forward||f.direction_reverse)&&ee.push("direction"),N={speedLevels:z,features:ee},X.value=z,te.value=ee,console.log("ğŸ” Inferred fan config:",N)}else if(L.platform==="light"){const z=[];N={features:z},Q.value=z,console.log("ğŸ” Inferred light features:",z)}c.value={platform:L.platform,manufacturer:O.manufacturer||"",model:((U=O.supportedModels)==null?void 0:U[0])||"",broadlinkDevice:T||"",commandType:E,config:N,commands:f},console.log("âœ… Profile populated:",c.value),console.log("âœ… Selected device:",c.value.broadlinkDevice),console.log("âœ… Command type:",c.value.commandType),R.value=E,setTimeout(()=>{j.value=!1},100)}},{immediate:!0});const se=W(()=>{var L;switch(p.value){case 0:return c.value.platform&&c.value.manufacturer&&c.value.model;case 1:return c.value.platform==="climate"?c.value.config.minTemp&&c.value.config.maxTemp&&((L=c.value.config.modes)==null?void 0:L.length)>0:!0;case 2:return c.value.broadlinkDevice&&c.value.commandType&&Object.keys(c.value.commands).length>0;case 3:return!0;default:return!1}}),he=W(()=>p.value!==3?null:pe(c.value)),B=W(()=>p.value!==3?null:ke(c.value));function h(){c.value.config={},c.value.commands={}}function m(){_.value=!1,c.value.commandType=$.value,R.value=$.value,c.value.commands={},$.value=""}function H(){_.value=!1,$.value=""}function ue(){se.value&&p.value<P.length-1&&p.value++}function ce(){p.value>0&&p.value--}function me(){_.value||(D.value=!0)}function S(){D.value=!1,s()}function s(){b("close"),setTimeout(()=>{p.value=0,c.value={platform:"",manufacturer:"",model:"",broadlinkDevice:"",commandType:"ir",config:{},commands:{}},R.value="ir"},300)}async function q(){var L,n,U,O,T;w.value=!0;try{if(!y.value){const K=await fetch("api/smartir/config/check");if(K.ok){const Y=await K.json();if(!((L=Y.platforms[c.value.platform])==null?void 0:L.file_exists)){x.value=Y.configuration_warnings||[],M.value=Y.config_path||"/config",o.value={platform:c.value.platform,json:he.value},u.value=!0,w.value=!1;return}}}let f;if(r.editMode&&((n=r.editData)!=null&&n.code))f=parseInt(r.editData.code),console.log("ğŸ“ Edit mode: Using existing code",f);else{const K=await fetch(`api/smartir/platforms/${c.value.platform}/next-code`);if(!K.ok)throw new Error("Failed to get next code number");f=(await K.json()).next_code,console.log("âœ¨ New profile: Using next code",f)}const E=await fetch("api/smartir/profiles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({platform:c.value.platform,json:he.value,code_number:f})});if(!E.ok){const K=await E.json();throw new Error(K.error||"Failed to save profile")}const N=await E.json(),z={name:`${c.value.manufacturer} ${c.value.model}`,unique_id:`${c.value.manufacturer.toLowerCase().replace(/[^a-z0-9]+/g,"_")}_${c.value.model.toLowerCase().replace(/[^a-z0-9]+/g,"_")}`,device_code:f,controller_data:c.value.broadlinkDevice},ee=await fetch("api/smartir/config/add-device",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({platform:c.value.platform,device_config:z})});if(!ee.ok){const K=await ee.json();console.error("Failed to add device to config:",K),(U=d.value)==null||U.warning(`Profile saved but failed to add to config file: ${K.error}`,"âš ï¸ Partial Success")}b("save",{json:he.value,yaml:B.value,profile:c.value,saved_to:N.path}),(O=d.value)==null||O.success(`File: ${N.filename}
Device Code: ${f}
Added to: smartir/${c.value.platform}.yaml

âš ï¸ Restart Home Assistant to activate`,"âœ… Profile Saved Successfully!"),s()}catch(f){console.error("Error saving profile:",f),(T=d.value)==null||T.error(f.message,"âŒ Error Saving Profile")}finally{w.value=!1}}async function ne(){y.value=!0,u.value=!1,o.value&&(await q(),o.value=null)}function ve(){var L,n;try{const U=JSON.stringify(he.value,null,2),O=new Blob([U],{type:"application/json"}),T=URL.createObjectURL(O),f=document.createElement("a");f.href=T;const E=c.value.manufacturer.toLowerCase().replace(/\s+/g,"_"),N=c.value.model.toLowerCase().replace(/\s+/g,"_");f.download=`smartir_${c.value.platform}_${E}_${N}.json`,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(T),(L=d.value)==null||L.success("You can manually upload this file to your SmartIR codes directory.","âœ… Profile Downloaded")}catch(U){console.error("Error downloading profile:",U),(n=d.value)==null||n.error(U.message,"âŒ Error Downloading Profile")}}function pe(L){const n={manufacturer:L.manufacturer,supportedModels:[L.model],supportedController:"Broadlink",commandsEncoding:"Base64",commands:{}};return L.platform==="climate"&&(n.minTemperature=L.config.minTemp,n.maxTemperature=L.config.maxTemp,n.precision=L.config.precision||1,n.operationModes=L.config.modes||[],n.fanModes=L.config.fanModes&&L.config.fanModes.length>0?L.config.fanModes:["auto"],L.config.swingModes&&L.config.swingModes.length>0&&(n.swingModes=L.config.swingModes),n.commands=L.commands),n}function ke(L){let n=`# SmartIR ${L.platform} configuration
`;return n+=`# Generated by Broadlink Manager v2

`,L.platform==="climate"&&(n+=`climate:
`,n+=`  - platform: smartir
`,n+=`    name: ${L.manufacturer} ${L.model}
`,n+=`    unique_id: ${L.manufacturer.toLowerCase()}_${L.model.toLowerCase().replace(/\s+/g,"_")}
`,n+=`    device_code: 10000  # Change this to your custom code number
`,n+=`    controller_data: ${L.broadlinkDevice}
`,L.config.tempSensor&&(n+=`    temperature_sensor: ${L.config.tempSensor}
`),L.config.humiditySensor&&(n+=`    humidity_sensor: ${L.config.humiditySensor}
`),L.config.powerSensor&&(n+=`    power_sensor: ${L.config.powerSensor}
`)),n}async function Ie(){try{console.log("Fetching remote devices from api/remote/devices...");const L=await fetch("api/remote/devices");if(console.log("Response status:",L.status,L.ok),L.ok){const n=await L.json();console.log("Loaded remote devices response:",n);const U=n.devices||[];console.log("Extracted devices array:",U),console.log("Device count:",U.length),t.value=U,console.log("broadlinkDevices.value set to:",t.value),console.log("Final device count:",t.value.length)}else console.error("Response not OK:",L.status,L.statusText),t.value=[]}catch(L){console.error("Error loading remote devices:",L),t.value=[]}}return re(()=>r.show,L=>{L&&Ie()}),Se(()=>{r.show&&Ie()}),(L,n)=>l.show?(a(),i("div",{key:0,class:"modal-overlay",onClick:me},[e("div",{class:"modal-container",onClick:n[19]||(n[19]=ae(()=>{},["stop"]))},[e("div",Hi,[e("h2",null,[n[22]||(n[22]=e("i",{class:"mdi mdi-file-document-edit"},null,-1)),C(" "+g(l.editMode?"Edit SmartIR Profile":"Create SmartIR Profile"),1)]),e("button",{onClick:s,class:"close-button"},[...n[23]||(n[23]=[e("i",{class:"mdi mdi-close"},null,-1)])])]),e("div",qi,[(a(),i(de,null,ye(P,(U,O)=>e("div",{key:O,class:Z(["step",{active:p.value===O,completed:p.value>O}])},[e("div",zi,[p.value>O?(a(),i("i",Ji)):(a(),i("span",Wi,g(O+1),1))]),e("span",Gi,g(U.label),1)],2)),64))]),e("div",Xi,[p.value===0?(a(),i("div",Ki,[n[29]||(n[29]=e("h3",null,"Device Information",-1)),e("div",Yi,[n[25]||(n[25]=e("label",null,"Platform Type *",-1)),J(e("select",{"onUpdate:modelValue":n[0]||(n[0]=U=>c.value.platform=U),onChange:h},[...n[24]||(n[24]=[Re('<option value="" data-v-2d014532>Select platform...</option><option value="climate" data-v-2d014532>ğŸŒ¡ï¸ Climate (AC, Heater, Heat Pump)</option><option value="media_player" data-v-2d014532>ğŸ“º Media Player (TV, Receiver)</option><option value="fan" data-v-2d014532>ğŸŒ€ Fan</option><option value="light" data-v-2d014532>ğŸ’¡ Light (LED Strip, IR Light)</option>',5)])],544),[[Ce,c.value.platform]])]),e("div",Zi,[n[26]||(n[26]=e("label",null,"Manufacturer *",-1)),J(e("input",{"onUpdate:modelValue":n[1]||(n[1]=U=>c.value.manufacturer=U),type:"text",placeholder:"e.g., Daikin, LG, Samsung"},null,512),[[$e,c.value.manufacturer]])]),e("div",Qi,[n[27]||(n[27]=e("label",null,"Model(s) *",-1)),J(e("input",{"onUpdate:modelValue":n[2]||(n[2]=U=>c.value.model=U),type:"text",placeholder:"e.g., FTXS35K, Multiple models"},null,512),[[$e,c.value.model]]),n[28]||(n[28]=e("small",null,'Enter model number or "Multiple" if it works with many models',-1))])])):A("",!0),p.value===1?(a(),i("div",er,[c.value.platform==="climate"?(a(),Te(Ca,{key:0,modelValue:c.value.config,"onUpdate:modelValue":n[3]||(n[3]=U=>c.value.config=U)},null,8,["modelValue"])):c.value.platform==="media_player"?(a(),i("div",tr,[n[36]||(n[36]=e("h3",null,"Media Player Configuration",-1)),n[37]||(n[37]=e("p",{class:"help-text"},[e("i",{class:"mdi mdi-information"}),C(" Configure the features your media player supports. You'll learn the IR commands in the next step. ")],-1)),e("div",or,[n[35]||(n[35]=e("h4",null,"Supported Features",-1)),e("div",lr,[e("label",sr,[J(e("input",{type:"checkbox",value:"turn_on","onUpdate:modelValue":n[4]||(n[4]=U=>F.value=U)},null,512),[[oe,F.value]]),n[30]||(n[30]=e("span",{class:"checkbox-label"},[e("i",{class:"mdi mdi-power"}),C(" Power On/Off ")],-1))]),e("label",nr,[J(e("input",{type:"checkbox",value:"volume","onUpdate:modelValue":n[5]||(n[5]=U=>F.value=U)},null,512),[[oe,F.value]]),n[31]||(n[31]=e("span",{class:"checkbox-label"},[e("i",{class:"mdi mdi-volume-high"}),C(" Volume Control ")],-1))]),e("label",ar,[J(e("input",{type:"checkbox",value:"mute","onUpdate:modelValue":n[6]||(n[6]=U=>F.value=U)},null,512),[[oe,F.value]]),n[32]||(n[32]=e("span",{class:"checkbox-label"},[e("i",{class:"mdi mdi-volume-mute"}),C(" Mute ")],-1))]),e("label",ir,[J(e("input",{type:"checkbox",value:"source","onUpdate:modelValue":n[7]||(n[7]=U=>F.value=U)},null,512),[[oe,F.value]]),n[33]||(n[33]=e("span",{class:"checkbox-label"},[e("i",{class:"mdi mdi-import"}),C(" Source Selection ")],-1))]),e("label",rr,[J(e("input",{type:"checkbox",value:"channel","onUpdate:modelValue":n[8]||(n[8]=U=>F.value=U)},null,512),[[oe,F.value]]),n[34]||(n[34]=e("span",{class:"checkbox-label"},[e("i",{class:"mdi mdi-numeric"}),C(" Channel Control ")],-1))])])])])):c.value.platform==="fan"?(a(),i("div",dr,[n[44]||(n[44]=e("h3",null,"Fan Configuration",-1)),n[45]||(n[45]=e("p",{class:"help-text"},[e("i",{class:"mdi mdi-information"}),C(" Configure the features your fan supports. You'll learn the IR commands in the next step. ")],-1)),e("div",ur,[n[40]||(n[40]=e("h4",null,"Fan Speed Levels",-1)),e("div",cr,[n[39]||(n[39]=e("label",null,"Number of Speed Levels *",-1)),J(e("select",{"onUpdate:modelValue":n[9]||(n[9]=U=>X.value=U)},[...n[38]||(n[38]=[e("option",{value:1},"1 Speed",-1),e("option",{value:2},"2 Speeds",-1),e("option",{value:3},"3 Speeds (Low/Med/High)",-1),e("option",{value:4},"4 Speeds",-1),e("option",{value:5},"5 Speeds",-1),e("option",{value:6},"6 Speeds",-1)])],512),[[Ce,X.value,void 0,{number:!0}]])])]),e("div",mr,[n[43]||(n[43]=e("h4",null,"Additional Features",-1)),e("div",vr,[e("label",pr,[J(e("input",{type:"checkbox",value:"oscillate","onUpdate:modelValue":n[10]||(n[10]=U=>te.value=U)},null,512),[[oe,te.value]]),n[41]||(n[41]=e("span",{class:"checkbox-label"},[e("i",{class:"mdi mdi-sync"}),C(" Oscillation ")],-1))]),e("label",fr,[J(e("input",{type:"checkbox",value:"direction","onUpdate:modelValue":n[11]||(n[11]=U=>te.value=U)},null,512),[[oe,te.value]]),n[42]||(n[42]=e("span",{class:"checkbox-label"},[e("i",{class:"mdi mdi-rotate-3d-variant"}),C(" Direction (Forward/Reverse) ")],-1))])])])])):c.value.platform==="light"?(a(),i("div",gr,[n[51]||(n[51]=e("h3",null,"Light Configuration",-1)),n[52]||(n[52]=e("p",{class:"help-text"},[e("i",{class:"mdi mdi-information"}),C(" Configure the features your light supports. You'll learn the IR commands in the next step. ")],-1)),e("div",yr,[n[50]||(n[50]=e("h4",null,"Supported Features",-1)),e("div",br,[e("label",hr,[J(e("input",{type:"checkbox",value:"turn_on","onUpdate:modelValue":n[12]||(n[12]=U=>Q.value=U)},null,512),[[oe,Q.value]]),n[46]||(n[46]=e("span",{class:"checkbox-label"},[e("i",{class:"mdi mdi-power"}),C(" Power On/Off ")],-1))]),e("label",kr,[J(e("input",{type:"checkbox",value:"brightness","onUpdate:modelValue":n[13]||(n[13]=U=>Q.value=U)},null,512),[[oe,Q.value]]),n[47]||(n[47]=e("span",{class:"checkbox-label"},[e("i",{class:"mdi mdi-brightness-6"}),C(" Brightness Control ")],-1))]),e("label",wr,[J(e("input",{type:"checkbox",value:"color_temp","onUpdate:modelValue":n[14]||(n[14]=U=>Q.value=U)},null,512),[[oe,Q.value]]),n[48]||(n[48]=e("span",{class:"checkbox-label"},[e("i",{class:"mdi mdi-thermometer"}),C(" Color Temperature ")],-1))]),e("label",$r,[J(e("input",{type:"checkbox",value:"rgb","onUpdate:modelValue":n[15]||(n[15]=U=>Q.value=U)},null,512),[[oe,Q.value]]),n[49]||(n[49]=e("span",{class:"checkbox-label"},[e("i",{class:"mdi mdi-palette"}),C(" RGB Color ")],-1))])])])])):A("",!0)])):A("",!0),p.value===2?(a(),i("div",Cr,[ie(Ya,{modelValue:c.value.commands,"onUpdate:modelValue":n[16]||(n[16]=U=>c.value.commands=U),platform:c.value.platform,config:c.value.config,broadlinkDevice:c.value.broadlinkDevice,"onUpdate:broadlinkDevice":n[17]||(n[17]=U=>c.value.broadlinkDevice=U),manufacturer:c.value.manufacturer,model:c.value.model,commandType:c.value.commandType,"onUpdate:commandType":n[18]||(n[18]=U=>c.value.commandType=U)},null,8,["modelValue","platform","config","broadlinkDevice","manufacturer","model","commandType"])])):A("",!0),p.value===3?(a(),i("div",Sr,[ie($i,{profile:c.value,"json-data":he.value,"yaml-config":B.value},null,8,["profile","json-data","yaml-config"])])):A("",!0)]),e("div",_r,[p.value>0?(a(),i("button",{key:0,onClick:ce,class:"btn-secondary"},[...n[53]||(n[53]=[e("i",{class:"mdi mdi-arrow-left"},null,-1),C(" Back ",-1)])])):A("",!0),n[57]||(n[57]=e("div",{class:"spacer"},null,-1)),e("button",{onClick:s,class:"btn-text"}," Cancel "),p.value<P.length-1?(a(),i("button",{key:1,onClick:ue,class:"btn-primary",disabled:!se.value},[...n[54]||(n[54]=[C(" Next ",-1),e("i",{class:"mdi mdi-arrow-right"},null,-1)])],8,Ir)):(a(),i("div",xr,[e("button",{onClick:q,class:"btn-primary",disabled:w.value},[n[55]||(n[55]=e("i",{class:"mdi mdi-cloud-upload"},null,-1)),C(" "+g(w.value?"Saving...":"Save to SmartIR"),1)],8,Dr),e("button",{onClick:ve,class:"btn-secondary",disabled:w.value},[...n[56]||(n[56]=[e("i",{class:"mdi mdi-download"},null,-1),C(" Download JSON ",-1)])],8,Tr)]))])]),ie(Bi,{show:u.value,platform:c.value.platform,warnings:x.value,"config-path":M.value,onClose:n[20]||(n[20]=U=>u.value=!1),onComplete:ne},null,8,["show","platform","warnings","config-path"]),ie(De,{isOpen:_.value,title:"Change Command Type?",message:"Changing the command type will clear all learned commands. Continue?",confirmText:"Continue",cancelText:"Cancel",dangerMode:!0,onConfirm:m,onCancel:H},null,8,["isOpen"]),ie(De,{isOpen:D.value,title:"Close Profile Builder?",message:"Are you sure you want to close? Your progress will be lost.",confirmText:"Close",cancelText:"Keep Editing",dangerMode:!0,onConfirm:S,onCancel:n[21]||(n[21]=U=>D.value=!1)},null,8,["isOpen"])])):A("",!0)}},Ar=be(Rr,[["__scopeId","data-v-2d014532"]]),Lr={class:"dashboard"},Mr={__name:"Dashboard",setup(l){const v=Le(),r=we("smartirEnabled"),b=k(!1),d=k(!1),p=k(null),w=k(null);function t(){d.value=!1,p.value=null,b.value=!0}async function u({platform:o,profile:_}){try{const D=await fetch(`api/smartir/platforms/${o}/profiles/${_.code}`);if(!D.ok)throw new Error("Failed to load profile");const $=await D.json();let R="";try{const j=await fetch(`api/smartir/config/get-device?platform=${o}&code=${_.code}`);j.ok?(R=(await j.json()).controller_data||"",console.log("âœ… Found controller_data from YAML:",R)):console.warn("âš ï¸ No YAML entry found for this profile (this is OK for profiles not yet added to config)")}catch(j){console.warn("âš ï¸ Could not fetch controller_data from config:",j)}d.value=!0,p.value={platform:o,code:_.code,profile:{...$.profile,controller_data:R}},b.value=!0}catch(D){console.error("Error loading profile for edit:",D),v.error("Failed to load profile for editing")}}function x(){b.value=!1,d.value=!1,p.value=null}function M(){console.log("Show install guide clicked"),window.open("https://github.com/smartHomeHub/SmartIR","_blank")}async function y(o){console.log("Profile saved:",o),x(),w.value&&w.value.loadAllProfiles&&(await w.value.loadAllProfiles(),console.log("âœ… Profiles list refreshed"))}return(o,_)=>(a(),i("div",Lr,[_e(r)?(a(),Te(tn,{key:0})):A("",!0),_[0]||(_[0]=Re('<div class="welcome-banner" data-v-7b34ae9a><div class="banner-content" data-v-7b34ae9a><div class="banner-icon" data-v-7b34ae9a><i class="mdi mdi-rocket-launch" data-v-7b34ae9a></i></div><div class="banner-text" data-v-7b34ae9a><h2 data-v-7b34ae9a>Welcome to Broadlink Manager v2!</h2><p data-v-7b34ae9a>Manage your IR/RF devices with a modern Vue 3 interface</p></div></div><div class="status-badges" data-v-7b34ae9a><span class="badge success" data-v-7b34ae9a><i class="mdi mdi-check-circle" data-v-7b34ae9a></i> Vue 3 Ready </span><span class="badge warning" data-v-7b34ae9a><i class="mdi mdi-beta" data-v-7b34ae9a></i> Beta </span></div></div>',1)),ie(Xs),_e(r)?(a(),Te(qn,{key:1,ref_key:"smartirStatusCard",ref:w,onCreateProfile:t,onEditProfile:u,onShowInstallGuide:M},null,512)):A("",!0),ie(Ar,{show:b.value,editMode:d.value,editData:p.value,onClose:x,onSave:y},null,8,["show","editMode","editData"])]))}},Or=be(Mr,[["__scopeId","data-v-7b34ae9a"]]),Er={class:"toast-container"},Vr={class:"toast-content"},Pr={key:0,class:"toast-title"},Ur={class:"toast-message"},jr={key:1,class:"toast-description"},Fr=["onClick"],Nr={__name:"Toast",setup(l,{expose:v}){const r=k([]);let b=0;function d(t){const u={success:"mdi-check-circle",error:"mdi-alert-circle",warning:"mdi-alert",info:"mdi-information"};return u[t]||u.info}function p({message:t,title:u,description:x,type:M="info",duration:y=5e3}){const o=b++,_={id:o,message:t,title:u,description:x,type:M};return r.value.push(_),y>0&&setTimeout(()=>{w(o)},y),o}function w(t){const u=r.value.findIndex(x=>x.id===t);u>-1&&r.value.splice(u,1)}return v({addToast:p,removeToast:w,show:p,success:(t,u)=>p({message:t,title:u,type:"success"}),error:(t,u)=>p({message:t,title:u,type:"error",duration:8e3}),warning:(t,u)=>p({message:t,title:u,type:"warning",duration:6e3}),info:(t,u)=>p({message:t,title:u,type:"info"})}),(t,u)=>(a(),Te(ze,{to:"body"},[e("div",Er,[ie(Ze,{name:"toast"},{default:Pe(()=>[(a(!0),i(de,null,ye(r.value,x=>(a(),i("div",{key:x.id,class:Z(["toast",[`toast-${x.type}`]])},[e("i",{class:Z(["mdi",d(x.type)])},null,2),e("div",Vr,[x.title?(a(),i("div",Pr,g(x.title),1)):A("",!0),e("div",Ur,g(x.message),1),x.description?(a(),i("div",jr,g(x.description),1)):A("",!0)]),e("button",{onClick:M=>w(x.id),class:"toast-close"},[...u[0]||(u[0]=[e("i",{class:"mdi mdi-close"},null,-1)])],8,Fr)],2))),128))]),_:1})])]))}},Br=be(Nr,[["__scopeId","data-v-bf1fd466"]]),Hr={id:"app",class:"app-container"},qr={class:"app-header"},zr={class:"header-content"},Jr={class:"header-right"},Wr=["title"],Gr={class:"settings-menu-container"},Xr={key:0,class:"settings-menu"},Kr=["title"],Yr={class:"toggle-content"},Zr={key:0,class:"not-installed-label"},Qr={key:0,href:"https://github.com/smartHomeHub/SmartIR",target:"_blank",class:"menu-item menu-link menu-subitem"},ed=["disabled"],td=["disabled"],od=["disabled"],ld={class:"app-main"},sd={__name:"App",setup(l){const v=k(null),r=k("light"),b=k(null),d=k(!1),p=k(!1),w=k(!1),t=k(localStorage.getItem("smartir_enabled")!=="false"),u=W(()=>{var P;return((P=b.value)==null?void 0:P.installed)||!1}),x=W(()=>({light:"mdi mdi-weather-sunny",medium:"mdi mdi-weather-partly-cloudy",dark:"mdi mdi-weather-night"})[r.value]),M=W(()=>({light:"Switch to Medium Theme",medium:"Switch to Dark Theme",dark:"Switch to Light Theme"})[r.value]),y=()=>{const P=["light","medium","dark"],F=(P.indexOf(r.value)+1)%P.length;r.value=P[F],document.body.classList.remove("medium-mode","dark-mode"),r.value==="medium"?document.body.classList.add("medium-mode"):r.value==="dark"&&document.body.classList.add("dark-mode"),localStorage.setItem("theme",r.value)},o=async()=>{try{const P=await We.getStatus();b.value=P,P.installed?console.log("âœ… SmartIR detected:",P.version):console.log("â„¹ï¸ SmartIR not detected")}catch(P){console.error("Error checking SmartIR:",P),b.value={installed:!1,error:P.message}}},_=async()=>{var P,c;p.value=!0;try{const X=(await le.get("/api/diagnostics/markdown")).data.markdown;await navigator.clipboard.writeText(X),(P=v.value)==null||P.success("Diagnostic summary copied to clipboard!"),d.value=!1}catch(F){console.error("Error copying diagnostics:",F),(c=v.value)==null||c.error("Failed to copy diagnostics")}finally{p.value=!1}},D=async()=>{var P,c;p.value=!0;try{const F=await le.get("/api/diagnostics/download",{responseType:"blob"}),X=window.URL.createObjectURL(new Blob([F.data])),te=document.createElement("a");te.href=X;const Q=F.headers["content-disposition"];let ge="broadlink_manager_diagnostics.zip";if(Q){const I=Q.match(/filename="?(.+)"?/);I&&(ge=I[1])}te.setAttribute("download",ge),document.body.appendChild(te),te.click(),te.remove(),window.URL.revokeObjectURL(X),(P=v.value)==null||P.success("Diagnostic bundle downloaded!"),d.value=!1}catch(F){console.error("Error downloading diagnostics:",F),(c=v.value)==null||c.error("Failed to download diagnostics")}finally{p.value=!1}},$=()=>{u.value&&(t.value=!t.value,localStorage.setItem("smartir_enabled",t.value.toString()),window.location.reload())},R=async()=>{var P,c,F;w.value=!0;try{const X=await le.post("/api/smartir/refresh-index");X.data.success?(P=v.value)==null||P.success(`Updated to v${X.data.version} (${X.data.total_devices} devices)`,"âœ… Index Updated"):(c=v.value)==null||c.error(X.data.error||"Unknown error","âŒ Update Failed")}catch(X){console.error("Error updating SmartIR index:",X),(F=v.value)==null||F.error("Failed to update device index","âŒ Update Error")}finally{w.value=!1,d.value=!1}},j=P=>{P.target.closest(".settings-menu-container")||(d.value=!1)};return Se(async()=>{const P=localStorage.getItem("theme");P&&["light","medium","dark"].includes(P)?(r.value=P,P==="medium"?document.body.classList.add("medium-mode"):P==="dark"&&document.body.classList.add("dark-mode")):localStorage.getItem("darkMode")==="true"&&(r.value="dark",document.body.classList.add("dark-mode"),localStorage.setItem("theme","dark")),await o();const c=Ne();c&&v.value&&(c.appContext.config.globalProperties.$toast=v.value),document.addEventListener("click",j)}),Be(()=>{document.removeEventListener("click",j)}),Ee("smartirStatus",b),Ee("smartirEnabled",t),Ee("refreshSmartIR",o),Ee("toast",v),(P,c)=>(a(),i("div",Hr,[e("header",qr,[e("div",zr,[c[13]||(c[13]=e("div",{class:"header-left"},[e("i",{class:"mdi mdi-remote"}),e("h1",null,"Broadlink Manager v2"),e("span",{class:"beta-badge"},"BETA")],-1)),e("div",Jr,[e("button",{onClick:y,class:"icon-button",title:M.value},[e("i",{class:Z(x.value)},null,2)],8,Wr),e("div",Gr,[e("button",{onClick:c[0]||(c[0]=F=>d.value=!d.value),class:"icon-button",title:"Settings"},[...c[2]||(c[2]=[e("i",{class:"mdi mdi-cog"},null,-1)])]),d.value?(a(),i("div",Xr,[c[9]||(c[9]=e("div",{class:"menu-section-title"},"Integration Settings",-1)),e("div",{class:Z(["menu-item toggle-item",{disabled:!u.value}]),onClick:c[1]||(c[1]=F=>u.value?$():null),title:u.value?"":"SmartIR is not installed"},[e("div",Yr,[c[3]||(c[3]=e("i",{class:"mdi mdi-air-conditioner"},null,-1)),c[4]||(c[4]=e("span",null,"SmartIR Integration",-1)),u.value?A("",!0):(a(),i("span",Zr,"(Not Installed)"))]),e("div",{class:Z(["toggle-switch",{active:t.value&&u.value,disabled:!u.value}])},[...c[5]||(c[5]=[e("div",{class:"toggle-slider"},null,-1)])],2)],10,Kr),t.value?(a(),i("a",Qr,[...c[6]||(c[6]=[e("i",{class:"mdi mdi-github"},null,-1),e("span",null,"SmartIR on GitHub",-1)])])):A("",!0),t.value?(a(),i("button",{key:1,onClick:R,class:"menu-item menu-subitem",disabled:w.value},[e("i",{class:Z(["mdi",w.value?"mdi-loading mdi-spin":"mdi-refresh"])},null,2),e("span",null,g(w.value?"Updating...":"Update Device Index"),1)],8,ed)):A("",!0),c[10]||(c[10]=e("div",{class:"menu-divider"},null,-1)),c[11]||(c[11]=e("div",{class:"menu-section-title"},"Diagnostics",-1)),e("button",{onClick:_,class:"menu-item",disabled:p.value},[...c[7]||(c[7]=[e("i",{class:"mdi mdi-content-copy"},null,-1),e("span",null,"Copy Diagnostics",-1)])],8,td),e("button",{onClick:D,class:"menu-item",disabled:p.value},[...c[8]||(c[8]=[e("i",{class:"mdi mdi-download"},null,-1),e("span",null,"Download Diagnostics",-1)])],8,od),c[12]||(c[12]=Re('<div class="menu-divider" data-v-b6ab76ba></div><div class="menu-section-title" data-v-b6ab76ba>Help &amp; Support</div><a href="https://github.com/tonyperkins/homeassistant-broadlink-manager-v2#readme" target="_blank" class="menu-item menu-link" data-v-b6ab76ba><i class="mdi mdi-book-open-variant" data-v-b6ab76ba></i><span data-v-b6ab76ba>Documentation</span></a><a href="https://github.com/tonyperkins/homeassistant-broadlink-manager-v2/issues" target="_blank" class="menu-item menu-link" data-v-b6ab76ba><i class="mdi mdi-bug" data-v-b6ab76ba></i><span data-v-b6ab76ba>Report Issue</span></a><div class="menu-divider" data-v-b6ab76ba></div><div class="menu-section-title" data-v-b6ab76ba>Community</div><a href="https://community.home-assistant.io/t/broadlink-manager-modern-web-interface-for-broadlink-devices/938473" target="_blank" class="menu-item menu-link" data-v-b6ab76ba><i class="mdi mdi-forum" data-v-b6ab76ba></i><span data-v-b6ab76ba>HA Forum Discussion</span></a><a href="https://www.reddit.com/r/homeassistant/comments/1o1q3kf/release_broadlink_manager_addon_a_modern_web_ui/" target="_blank" class="menu-item menu-link" data-v-b6ab76ba><i class="mdi mdi-reddit" data-v-b6ab76ba></i><span data-v-b6ab76ba>Reddit Discussion</span></a><div class="menu-divider" data-v-b6ab76ba></div><div class="menu-section-title" data-v-b6ab76ba>Project</div><a href="https://github.com/tonyperkins/homeassistant-broadlink-manager-v2" target="_blank" class="menu-item menu-link" data-v-b6ab76ba><i class="mdi mdi-github" data-v-b6ab76ba></i><span data-v-b6ab76ba>GitHub Repository</span></a><a href="https://ko-fi.com/tonyperkins" target="_blank" class="menu-item menu-link menu-item-sponsor" data-v-b6ab76ba><i class="mdi mdi-coffee" data-v-b6ab76ba></i><span data-v-b6ab76ba>Support on Ko-fi</span></a>',12))])):A("",!0)])])])]),e("main",ld,[ie(Or)]),c[14]||(c[14]=e("footer",{class:"app-footer"},[e("p",null,"Broadlink Manager v2.0.0-beta.1 | Built with Vue 3")],-1)),ie(Br,{ref_key:"toastRef",ref:v},null,512)]))}},nd=be(sd,[["__scopeId","data-v-b6ab76ba"]]),Ge=Qe(nd),ad=et();Ge.use(ad);Ge.mount("#app");
